Started POST "/api" for ::1 at 2023-08-01 15:49:39 -0700
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/api"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:49:40 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:49:41 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/favicon.ico" for ::1 at 2023-08-01 15:49:41 -0700
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:49:43 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:49:46 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:49:47 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:49:48 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:49:49 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:00 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:03 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:07 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:07 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:50:14 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:14 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:20 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:20 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:22 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:25 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:25 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:27 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:30 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:30 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:31 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started POST "/api" for ::1 at 2023-08-01 15:50:38 -0700
  
ActionController::RoutingError (No route matches [POST] "/api"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:40 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:43 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:46 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:46 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started POST "/api" for ::1 at 2023-08-01 15:50:47 -0700
  
ActionController::RoutingError (No route matches [POST] "/api"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:48 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:49 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:50:49 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:50 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/_next/webpack-hmr" for ::1 at 2023-08-01 15:50:50 -0700
  
ActionController::RoutingError (No route matches [GET] "/_next/webpack-hmr"):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:50:53 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:50:54 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:50:54 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:50:54 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:50:55 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:50:55 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:50:55 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:50:56 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:51:15 -0700
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:51:16 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:51:17 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:51:46 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:51:47 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:51:48 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:51:48 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:51:48 -0700
  
ActionController::RoutingError (uninitialized constant Api):
  
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:52:27 -0700
  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/controllers/api/v1/capture_controller.rb:4:in `process'
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:53:03 -0700
  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/controllers/api/v1/capture_controller.rb:4:in `process'
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:53:05 -0700
  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/controllers/api/v1/capture_controller.rb:4:in `process'
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:53:05 -0700
  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/controllers/api/v1/capture_controller.rb:4:in `process'
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:53:06 -0700
  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/controllers/api/v1/capture_controller.rb:4:in `process'
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:53:06 -0700
  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/controllers/api/v1/capture_controller.rb:4:in `process'
Started GET "/api/v1/capture" for ::1 at 2023-08-01 15:53:34 -0700
Processing by Api::V1::CaptureController#process_data as HTML
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 175)


Started GET "/api/v1/capture" for ::1 at 2023-08-01 16:45:30 -0700
Processing by Api::V1::CaptureController#process_data as HTML
Completed 500 Internal Server Error in 15ms (Allocations: 1540)


  
NameError (uninitialized constant Api::V1::CaptureController::ProcessDataJob):
  
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started GET "/api/v1/capture" for ::1 at 2023-08-01 16:47:25 -0700
  [1m[35m (2.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CaptureController#process_data as HTML
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.0ms | Allocations: 3940)


  
NameError (uninitialized constant ApplicationJob
Did you mean?  ApplicationRecord):
  
app/jobs/process_data_job.rb:1:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started GET "/api/v1/capture" for ::1 at 2023-08-01 16:49:03 -0700
Processing by Api::V1::CaptureController#process_data as HTML
[ActiveJob] Enqueued ProcessDataJob (Job ID: 2a2ca7cc-ad42-4c60-ac08-b935bdb1e2ad) to Async(default) with arguments: ["DATA WOULD GO HERE?!"]
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 779)


[ActiveJob] [ProcessDataJob] [2a2ca7cc-ad42-4c60-ac08-b935bdb1e2ad] Performing ProcessDataJob (Job ID: 2a2ca7cc-ad42-4c60-ac08-b935bdb1e2ad) from Async(default) enqueued at 2023-08-01T23:49:03Z with arguments: ["DATA WOULD GO HERE?!"]
[ActiveJob] [ProcessDataJob] [2a2ca7cc-ad42-4c60-ac08-b935bdb1e2ad] Performed ProcessDataJob (Job ID: 2a2ca7cc-ad42-4c60-ac08-b935bdb1e2ad) from Async(default) in 16.55ms
Started GET "/api/v1/capture" for ::1 at 2023-08-01 16:52:18 -0700
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CaptureController#process_data as HTML
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.0ms | Allocations: 3630)


  
NoMethodError (undefined method `perform_later' for ProcessDataJob:Class
Did you mean?  perform_at):
  
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started GET "/api/v1/capture" for ::1 at 2023-08-01 16:52:28 -0700
Processing by Api::V1::CaptureController#process_data as HTML
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 718)


Started GET "/api/v1/capture" for ::1 at 2023-08-01 17:08:50 -0700
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CaptureController#process_data as HTML
Completed 200 OK in 13280ms (Views: 0.9ms | ActiveRecord: 0.0ms | Allocations: 63104)


Started GET "/favicon.ico" for ::1 at 2023-08-01 17:09:04 -0700
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started OPTIONS "/api" for ::1 at 2023-08-01 17:09:21 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api"):
  
Started OPTIONS "/api" for ::1 at 2023-08-01 17:09:31 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api"):
  
Started OPTIONS "/api" for ::1 at 2023-08-01 17:09:41 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api"):
  
Started OPTIONS "/api" for ::1 at 2023-08-01 17:09:51 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api"):
  
Started OPTIONS "/api" for ::1 at 2023-08-01 17:10:01 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api"):
  
Started OPTIONS "/api" for ::1 at 2023-08-01 17:10:11 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api"):
  
Started OPTIONS "/api" for ::1 at 2023-08-01 17:10:21 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api"):
  
Started OPTIONS "/api" for ::1 at 2023-08-01 17:10:31 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api"):
  
Started OPTIONS "/api" for ::1 at 2023-08-01 17:10:41 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api"):
  
Started OPTIONS "/api" for ::1 at 2023-08-01 17:10:57 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api"):
  
Started OPTIONS "/api" for ::1 at 2023-08-01 17:11:07 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api"):
  
Started OPTIONS "/api" for ::1 at 2023-08-01 17:11:17 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api"):
  
Started OPTIONS "/api/v1/capture" for ::1 at 2023-08-01 17:11:32 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api/v1/capture"):
  
Started OPTIONS "/api/v1/capture" for ::1 at 2023-08-01 17:11:42 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api/v1/capture"):
  
Started OPTIONS "/api/v1/capture" for ::1 at 2023-08-01 17:11:53 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api/v1/capture"):
  
Started OPTIONS "/api/v1/capture" for ::1 at 2023-08-01 17:12:03 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api/v1/capture"):
  
Started OPTIONS "/api/v1/capture" for ::1 at 2023-08-01 17:12:13 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api/v1/capture"):
  
Started OPTIONS "/api/v1/capture" for ::1 at 2023-08-01 17:12:23 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api/v1/capture"):
  
Started OPTIONS "/api/v1/capture" for ::1 at 2023-08-01 17:12:33 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api/v1/capture"):
  
Started OPTIONS "/api/v1/capture" for ::1 at 2023-08-01 17:12:43 -0700
  
ActionController::RoutingError (No route matches [OPTIONS] "/api/v1/capture"):
  
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:14:41 -0700
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935082882-48ef1bd1-6427-6996-3c98-51a6e5d5ecee", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935082882, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935082918-fb088f5e-037b-a7f9-f8a3-f6f0b2f565e2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935082918, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935082953-47c3237d-44d0-0890-83ab-b1e8ce9878ad", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935082953, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935082987-d5dcf050-976b-6913-7c43-6c4f5cd48e1a", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935082987, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935083023-67044dd6-7015-fb79-f91b-70ceae4318ee", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935083023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935082882-48ef1bd1-6427-6996-3c98-51a6e5d5ecee", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935082882, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935082918-fb088f5e-037b-a7f9-f8a3-f6f0b2f565e2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935082918, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935082953-47c3237d-44d0-0890-83ab-b1e8ce9878ad", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935082953, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935082987-d5dcf050-976b-6913-7c43-6c4f5cd48e1a", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935082987, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935083023-67044dd6-7015-fb79-f91b-70ceae4318ee", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935083023, "data"=>{"filename"=>"example.pdf"}}]}}
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:07 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:07 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:07 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:07 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Processing by Api::V1::CaptureController#process_data as */*
Processing by Api::V1::CaptureController#process_data as */*
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 1834ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 55882)


Completed 200 OK in 1826ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 33698)


Completed 200 OK in 657ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 23416)


Completed 200 OK in 752539ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 191300)


Completed 200 OK in 6852ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 146764)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:13 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:14 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:14 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:14 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:14 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 596ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 2644)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:14 -0700
Processing by Api::V1::CaptureController#process_data as */*
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Processing by Api::V1::CaptureController#process_data as */*
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 582ms (Views: 1.1ms | ActiveRecord: 0.0ms | Allocations: 29442)


Processing by Api::V1::CaptureController#process_data as */*
Completed 200 OK in 1157ms (Views: 1.3ms | ActiveRecord: 0.0ms | Allocations: 60238)


  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 537ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 81637)


Completed 200 OK in 490ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 7692)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:16 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:16 -0700
Completed 200 OK in 492ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 12231)


Processing by Api::V1::CaptureController#process_data as */*
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:16 -0700
Processing by Api::V1::CaptureController#process_data as */*
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:16 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 610ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 11401)


  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:18 -0700
Completed 200 OK in 512ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 27333)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:19 -0700
Completed 200 OK in 1115ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 13810)


Completed 200 OK in 507ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 3872)


Processing by Api::V1::CaptureController#process_data as */*
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:19 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Processing by Api::V1::CaptureController#process_data as */*
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:19 -0700
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 477ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 8255)


Processing by Api::V1::CaptureController#process_data as */*
Completed 200 OK in 446ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 3144)


Completed 200 OK in 947ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 53360)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:20 -0700
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 456ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 2617)


Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690935282822-78cd59ba-b6d0-c80b-b093-cf38a5a0bb51", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282822, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690935282892-564ccb30-bbf8-5c8a-1f2f-7bbd99ab00fe", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282892, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935282954-faf57089-ab1f-31cd-c6c7-5a7c92e01f2b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282954, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690935282986-332c5ea0-a0a9-3350-b1e1-535f7a3670c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935282986, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690935283023-71ee2f16-a706-cfd7-c5c8-3e48f59071f6", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690935283023, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 435ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2395)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:27:42 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 400764ms (Views: 1.9ms | ActiveRecord: 0.0ms | Allocations: 2121)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:34:22 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:34:22 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:34:22 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:34:22 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:34:22 -0700
Processing by Api::V1::CaptureController#process_data as */*
Processing by Api::V1::CaptureController#process_data as */*
Processing by Api::V1::CaptureController#process_data as */*
Processing by Api::V1::CaptureController#process_data as */*
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 799ms (Views: 0.7ms | Allocations: 7556)


Completed 200 OK in 1604ms (Views: 0.3ms | Allocations: 15327)


Completed 200 OK in 2717ms (Views: 0.6ms | Allocations: 18579)


Completed 200 OK in 803ms (Views: 0.2ms | Allocations: 4492)


Completed 200 OK in 2352ms (Views: 1.8ms | Allocations: 118229)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:34:28 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:34:28 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:34:28 -0700
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:34:28 -0700
Processing by Api::V1::CaptureController#process_data as */*
Processing by Api::V1::CaptureController#process_data as */*
Processing by Api::V1::CaptureController#process_data as */*
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936446332-d2a9f3c1-b894-44d0-ed4c-fab86e633a5f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446332, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936446412-8310c80a-614d-05ea-037b-1d861fba3e25", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446412, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446450-fc9a7932-263c-1626-90ec-f5ff76d130b3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446450, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936446486-6f894f78-eae7-768b-ed27-349a561b792c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446486, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446546-9f2b55df-3ce3-4a17-6379-2501a51657b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446546, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936446332-d2a9f3c1-b894-44d0-ed4c-fab86e633a5f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446332, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936446412-8310c80a-614d-05ea-037b-1d861fba3e25", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446412, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446450-fc9a7932-263c-1626-90ec-f5ff76d130b3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446450, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936446486-6f894f78-eae7-768b-ed27-349a561b792c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446486, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446546-9f2b55df-3ce3-4a17-6379-2501a51657b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446546, "data"=>{"filename"=>"example.pdf"}}]}}
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936446332-d2a9f3c1-b894-44d0-ed4c-fab86e633a5f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446332, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936446412-8310c80a-614d-05ea-037b-1d861fba3e25", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446412, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446450-fc9a7932-263c-1626-90ec-f5ff76d130b3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446450, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936446486-6f894f78-eae7-768b-ed27-349a561b792c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446486, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446546-9f2b55df-3ce3-4a17-6379-2501a51657b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446546, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936446332-d2a9f3c1-b894-44d0-ed4c-fab86e633a5f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446332, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936446412-8310c80a-614d-05ea-037b-1d861fba3e25", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446412, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446450-fc9a7932-263c-1626-90ec-f5ff76d130b3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446450, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936446486-6f894f78-eae7-768b-ed27-349a561b792c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446486, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446546-9f2b55df-3ce3-4a17-6379-2501a51657b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446546, "data"=>{"filename"=>"example.pdf"}}]}}
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 500 Internal Server Error in 16ms (Allocations: 4649)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Completed 500 Internal Server Error in 46ms (Allocations: 18182)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Completed 500 Internal Server Error in 59ms (Allocations: 20969)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Completed 500 Internal Server Error in 53ms (Allocations: 19706)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:34:36 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936446332-d2a9f3c1-b894-44d0-ed4c-fab86e633a5f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446332, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936446412-8310c80a-614d-05ea-037b-1d861fba3e25", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446412, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446450-fc9a7932-263c-1626-90ec-f5ff76d130b3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446450, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936446486-6f894f78-eae7-768b-ed27-349a561b792c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446486, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446546-9f2b55df-3ce3-4a17-6379-2501a51657b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446546, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936446332-d2a9f3c1-b894-44d0-ed4c-fab86e633a5f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446332, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936446412-8310c80a-614d-05ea-037b-1d861fba3e25", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446412, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446450-fc9a7932-263c-1626-90ec-f5ff76d130b3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446450, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936446486-6f894f78-eae7-768b-ed27-349a561b792c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446486, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446546-9f2b55df-3ce3-4a17-6379-2501a51657b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446546, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 10ms (Allocations: 1421)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:34:46 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936446332-d2a9f3c1-b894-44d0-ed4c-fab86e633a5f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446332, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936446412-8310c80a-614d-05ea-037b-1d861fba3e25", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446412, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446450-fc9a7932-263c-1626-90ec-f5ff76d130b3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446450, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936446486-6f894f78-eae7-768b-ed27-349a561b792c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446486, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446546-9f2b55df-3ce3-4a17-6379-2501a51657b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446546, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936446332-d2a9f3c1-b894-44d0-ed4c-fab86e633a5f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446332, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936446412-8310c80a-614d-05ea-037b-1d861fba3e25", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446412, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446450-fc9a7932-263c-1626-90ec-f5ff76d130b3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446450, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936446486-6f894f78-eae7-768b-ed27-349a561b792c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446486, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446546-9f2b55df-3ce3-4a17-6379-2501a51657b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446546, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 18ms (Allocations: 1421)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:34:56 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936446332-d2a9f3c1-b894-44d0-ed4c-fab86e633a5f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446332, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936446412-8310c80a-614d-05ea-037b-1d861fba3e25", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446412, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446450-fc9a7932-263c-1626-90ec-f5ff76d130b3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446450, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936446486-6f894f78-eae7-768b-ed27-349a561b792c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446486, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446546-9f2b55df-3ce3-4a17-6379-2501a51657b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446546, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936446332-d2a9f3c1-b894-44d0-ed4c-fab86e633a5f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446332, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936446412-8310c80a-614d-05ea-037b-1d861fba3e25", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446412, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446450-fc9a7932-263c-1626-90ec-f5ff76d130b3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446450, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936446486-6f894f78-eae7-768b-ed27-349a561b792c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446486, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446546-9f2b55df-3ce3-4a17-6379-2501a51657b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446546, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 35ms (Allocations: 1421)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:35:26 -0700
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936446332-d2a9f3c1-b894-44d0-ed4c-fab86e633a5f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446332, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936446412-8310c80a-614d-05ea-037b-1d861fba3e25", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446412, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446450-fc9a7932-263c-1626-90ec-f5ff76d130b3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446450, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936446486-6f894f78-eae7-768b-ed27-349a561b792c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446486, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446546-9f2b55df-3ce3-4a17-6379-2501a51657b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446546, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936446332-d2a9f3c1-b894-44d0-ed4c-fab86e633a5f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446332, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936446412-8310c80a-614d-05ea-037b-1d861fba3e25", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446412, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446450-fc9a7932-263c-1626-90ec-f5ff76d130b3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446450, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936446486-6f894f78-eae7-768b-ed27-349a561b792c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446486, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936446546-9f2b55df-3ce3-4a17-6379-2501a51657b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936446546, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 25ms (ActiveRecord: 0.0ms | Allocations: 8469)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:35:40 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.0ms | Allocations: 1445)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:35:50 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 23ms (ActiveRecord: 0.0ms | Allocations: 1444)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:36:00 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 46ms (ActiveRecord: 0.0ms | Allocations: 4506)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:36:10 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms | Allocations: 3195)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:36:20 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 30ms (ActiveRecord: 0.0ms | Allocations: 1442)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:36:30 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 18ms (ActiveRecord: 0.0ms | Allocations: 1441)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:36:40 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 34ms (ActiveRecord: 0.0ms | Allocations: 4502)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:36:50 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.0ms | Allocations: 1441)


  
NameError (uninitialized constant Identify):
  
app/jobs/process_data_job.rb:3:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:37:00 -0700
  [1m[35m (14.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936530541-8c7ceb08-fa15-ea89-a626-cda1fc059a9b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530541, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936530590-204b4358-1af5-2f19-65a8-fbbc90ff86aa", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530590, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530634-4e91feb5-3ab5-4b77-53ee-aa336b72000f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530634, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936530670-a84aacc3-860d-d5d2-d816-051377e85f9d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530670, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936530708-b91fb4a5-2cab-1bad-d9e5-e0ad8842cd00", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936530708, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 20ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 5801)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:37:10 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 226)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:37:30 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936640913-bb9dc3f2-7ba9-a70a-c736-353fc1b96791", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936640913, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936640957-8a39ae63-f071-4b31-f656-00ecb04be98d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936640957, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936640992-79ab7629-18e2-d6b8-612c-a23bf20a1802", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936640992, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936641028-a40f9f4f-f455-42c0-b98f-9be03c4578b4", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936641028, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936641074-c3a08d49-407e-8d05-fe9d-445e1b8bdc78", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936641074, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936640913-bb9dc3f2-7ba9-a70a-c736-353fc1b96791", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936640913, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936640957-8a39ae63-f071-4b31-f656-00ecb04be98d", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936640957, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936640992-79ab7629-18e2-d6b8-612c-a23bf20a1802", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936640992, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936641028-a40f9f4f-f455-42c0-b98f-9be03c4578b4", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936641028, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936641074-c3a08d49-407e-8d05-fe9d-445e1b8bdc78", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936641074, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 39ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 516)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:37:40 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 3ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 225)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:37:50 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1359)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:38:07 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936677315-067885c3-adf1-9924-2cb4-cf5294cc1956", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936677315, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936677359-8d2d51cf-082a-cab5-cb73-1a06d2bacbb3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936677359, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936677394-29482262-f804-2217-166c-ca4d8c103d8a", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936677394, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936677429-53931c44-149b-2dac-25e0-a6d1fb9a34b1", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936677429, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936677463-72bcfb87-99db-9366-a57e-8de46e149b04", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936677463, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936677315-067885c3-adf1-9924-2cb4-cf5294cc1956", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936677315, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936677359-8d2d51cf-082a-cab5-cb73-1a06d2bacbb3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936677359, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936677394-29482262-f804-2217-166c-ca4d8c103d8a", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936677394, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936677429-53931c44-149b-2dac-25e0-a6d1fb9a34b1", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936677429, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936677463-72bcfb87-99db-9366-a57e-8de46e149b04", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936677463, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 1567)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:38:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 221)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:38:27 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 221)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:38:37 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 221)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:38:47 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 221)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:38:57 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 2ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 221)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:39:07 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 221)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:39:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 221)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:39:27 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 224)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:39:37 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 221)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:39:47 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690936781422-28773ed3-5a86-fa21-6dec-c7892cd5cb48", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936781422, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936781455-db74a186-6ed4-73ea-55fd-c66887f59323", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936781455, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690936781422-28773ed3-5a86-fa21-6dec-c7892cd5cb48", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936781422, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936781455-db74a186-6ed4-73ea-55fd-c66887f59323", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936781455, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 344)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:39:57 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 2ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 223)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:40:07 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690936800694-aeaa3a39-9599-de7f-047b-4f7297c54ef3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936800694, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936800739-c38564f0-a60e-6856-cc50-7199d0d15edb", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936800739, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690936800694-aeaa3a39-9599-de7f-047b-4f7297c54ef3", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936800694, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936800739-c38564f0-a60e-6856-cc50-7199d0d15edb", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936800739, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 2ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 343)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:40:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 221)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:40:30 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936820361-7c94e2ea-379b-b637-8a57-c6873a0a56dc", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936820361, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936820414-386a1430-bbfc-b96c-ec41-d189e2d0201b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936820414, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936820455-ca80897e-c0f0-1cc5-4e2c-1e2a6a86c649", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936820455, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936820492-115df421-8787-1a0a-97aa-411a72e8e08a", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936820492, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936820530-fc40f6e6-8c16-d448-8a7c-3ded78bc37c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936820530, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936820361-7c94e2ea-379b-b637-8a57-c6873a0a56dc", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936820361, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936820414-386a1430-bbfc-b96c-ec41-d189e2d0201b", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936820414, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936820455-ca80897e-c0f0-1cc5-4e2c-1e2a6a86c649", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936820455, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936820492-115df421-8787-1a0a-97aa-411a72e8e08a", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936820492, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936820530-fc40f6e6-8c16-d448-8a7c-3ded78bc37c9", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936820530, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 6ms (Views: 1.2ms | ActiveRecord: 0.0ms | Allocations: 513)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:41:30 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[], "capture"=>{"_json"=>[]}}
Completed 200 OK in 24ms (Views: 1.3ms | ActiveRecord: 0.0ms | Allocations: 221)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:41:43 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690936893671-c7c80bcc-6df6-b065-cee9-029d423ec065", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936893671, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936893720-f25694c0-2265-df67-c107-79f14e9b3a9c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936893720, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936893763-a96efd88-76aa-f456-fea6-a9f387214305", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936893763, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936893802-9a0c9ab1-8bc8-ba89-6aef-d11a84343792", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936893802, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936893840-f611dead-bc53-a4df-8c16-4a0f161e1cdb", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936893840, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690936893671-c7c80bcc-6df6-b065-cee9-029d423ec065", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936893671, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690936893720-f25694c0-2265-df67-c107-79f14e9b3a9c", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936893720, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936893763-a96efd88-76aa-f456-fea6-a9f387214305", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936893763, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690936893802-9a0c9ab1-8bc8-ba89-6aef-d11a84343792", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936893802, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690936893840-f611dead-bc53-a4df-8c16-4a0f161e1cdb", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690936893840, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 512)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:48:21 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690937291854-24ef61c6-7da6-5e9a-fc9a-160205d63cde", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937291854, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690937291900-5e3dbeff-f673-b968-dd13-249a2670eaed", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937291900, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690937291941-1e799edc-ca5c-734a-f0c0-f6dac099b1ac", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937291941, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690937291977-6db91f56-fd28-c28b-6d31-ef393f33c9ba", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937291977, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690937292014-46c994f2-ee64-cf49-6d9e-009b1bff2a20", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937292014, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690937291854-24ef61c6-7da6-5e9a-fc9a-160205d63cde", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937291854, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690937291900-5e3dbeff-f673-b968-dd13-249a2670eaed", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937291900, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690937291941-1e799edc-ca5c-734a-f0c0-f6dac099b1ac", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937291941, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690937291977-6db91f56-fd28-c28b-6d31-ef393f33c9ba", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937291977, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690937292014-46c994f2-ee64-cf49-6d9e-009b1bff2a20", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937292014, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 13ms (Views: 0.2ms | Allocations: 2286)


Started POST "/api/v1/capture" for ::1 at 2023-08-01 17:49:11 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1690937341606-4a41bee1-56ce-713f-c091-6df1c87f221f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937341606, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690937341653-9a2ab58e-1d6f-4269-a9fb-e0b98d03806e", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937341653, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690937341699-5a775933-b577-4842-12ac-167ae1a733ce", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937341699, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690937341735-a137b603-6a61-7326-8546-61b4e203ff3a", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937341735, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690937341771-8a898f0c-9990-4434-af85-5e30ceb53d15", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937341771, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1690937341606-4a41bee1-56ce-713f-c091-6df1c87f221f", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937341606, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1690937341653-9a2ab58e-1d6f-4269-a9fb-e0b98d03806e", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937341653, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690937341699-5a775933-b577-4842-12ac-167ae1a733ce", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937341699, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690937341735-a137b603-6a61-7326-8546-61b4e203ff3a", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937341735, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690937341771-8a898f0c-9990-4434-af85-5e30ceb53d15", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690937341771, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 6ms (Views: 0.2ms | Allocations: 2137)


  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:08:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 30ms (Allocations: 1698)


  
NameError (uninitialized constant EventProcessors
Did you mean?  EVENT_PROCESSOR_KLASS_DICT):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:09:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 43ms (Allocations: 4671)


  
NameError (uninitialized constant EventProcessors
Did you mean?  EVENT_PROCESSOR_KLASS_DICT):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:10:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 21ms (Allocations: 1606)


  
NameError (uninitialized constant EventProcessors
Did you mean?  EVENT_PROCESSOR_KLASS_DICT):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:11:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 9ms (Allocations: 1606)


  
NameError (uninitialized constant EventProcessors
Did you mean?  EVENT_PROCESSOR_KLASS_DICT):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:12:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 9ms (Allocations: 1606)


  
NameError (uninitialized constant EventProcessors
Did you mean?  EVENT_PROCESSOR_KLASS_DICT):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:13:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 22ms (Allocations: 1606)


  
NameError (uninitialized constant EventProcessors
Did you mean?  EVENT_PROCESSOR_KLASS_DICT):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:14:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 12ms (Allocations: 1606)


  
NameError (uninitialized constant EventProcessors
Did you mean?  EVENT_PROCESSOR_KLASS_DICT):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:15:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000057410-a01822d8-c438-43ab-fb84-dcd32311f308", "url"=>"http://localhost:3000/", "timestamp"=>1691000057410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000057460-df1dbeee-abec-b858-3b49-211a56b181ff", "url"=>"http://localhost:3000/", "timestamp"=>1691000057460, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000057410-a01822d8-c438-43ab-fb84-dcd32311f308", "url"=>"http://localhost:3000/", "timestamp"=>1691000057410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000057460-df1dbeee-abec-b858-3b49-211a56b181ff", "url"=>"http://localhost:3000/", "timestamp"=>1691000057460, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 11ms (Allocations: 1606)


  
NameError (uninitialized constant EventProcessors
Did you mean?  EVENT_PROCESSOR_KLASS_DICT):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:16:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000057410-a01822d8-c438-43ab-fb84-dcd32311f308", "url"=>"http://localhost:3000/", "timestamp"=>1691000057410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000057460-df1dbeee-abec-b858-3b49-211a56b181ff", "url"=>"http://localhost:3000/", "timestamp"=>1691000057460, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000057410-a01822d8-c438-43ab-fb84-dcd32311f308", "url"=>"http://localhost:3000/", "timestamp"=>1691000057410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000057460-df1dbeee-abec-b858-3b49-211a56b181ff", "url"=>"http://localhost:3000/", "timestamp"=>1691000057460, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 30ms (Allocations: 4671)


  
NameError (uninitialized constant EventProcessors
Did you mean?  EVENT_PROCESSOR_KLASS_DICT):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:17:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000057410-a01822d8-c438-43ab-fb84-dcd32311f308", "url"=>"http://localhost:3000/", "timestamp"=>1691000057410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000057460-df1dbeee-abec-b858-3b49-211a56b181ff", "url"=>"http://localhost:3000/", "timestamp"=>1691000057460, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000057410-a01822d8-c438-43ab-fb84-dcd32311f308", "url"=>"http://localhost:3000/", "timestamp"=>1691000057410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000057460-df1dbeee-abec-b858-3b49-211a56b181ff", "url"=>"http://localhost:3000/", "timestamp"=>1691000057460, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 19ms (Allocations: 4671)


  
NameError (uninitialized constant EventProcessors
Did you mean?  EVENT_PROCESSOR_KLASS_DICT):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:18:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000057410-a01822d8-c438-43ab-fb84-dcd32311f308", "url"=>"http://localhost:3000/", "timestamp"=>1691000057410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000057460-df1dbeee-abec-b858-3b49-211a56b181ff", "url"=>"http://localhost:3000/", "timestamp"=>1691000057460, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000057410-a01822d8-c438-43ab-fb84-dcd32311f308", "url"=>"http://localhost:3000/", "timestamp"=>1691000057410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000057460-df1dbeee-abec-b858-3b49-211a56b181ff", "url"=>"http://localhost:3000/", "timestamp"=>1691000057460, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 23ms (Allocations: 4671)


  
NameError (uninitialized constant EventProcessors
Did you mean?  EVENT_PROCESSOR_KLASS_DICT):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:19:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000057410-a01822d8-c438-43ab-fb84-dcd32311f308", "url"=>"http://localhost:3000/", "timestamp"=>1691000057410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000057460-df1dbeee-abec-b858-3b49-211a56b181ff", "url"=>"http://localhost:3000/", "timestamp"=>1691000057460, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000057410-a01822d8-c438-43ab-fb84-dcd32311f308", "url"=>"http://localhost:3000/", "timestamp"=>1691000057410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000057460-df1dbeee-abec-b858-3b49-211a56b181ff", "url"=>"http://localhost:3000/", "timestamp"=>1691000057460, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 15ms (Allocations: 1606)


  
NameError (uninitialized constant EventProcessors
Did you mean?  EVENT_PROCESSOR_KLASS_DICT):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started GET "/api/v1/capture" for ::1 at 2023-08-02 11:19:38 -0700
  [1m[35m (5.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CaptureController#process_data as HTML
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 164)


Started GET "/favicon.ico" for ::1 at 2023-08-02 11:19:38 -0700
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:20:00 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000057410-a01822d8-c438-43ab-fb84-dcd32311f308", "url"=>"http://localhost:3000/", "timestamp"=>1691000057410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000057460-df1dbeee-abec-b858-3b49-211a56b181ff", "url"=>"http://localhost:3000/", "timestamp"=>1691000057460, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1690999637518-a67c2c05-ac17-7da1-a38a-131eb456ee55", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637518, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637655-05f795e0-524e-5216-cbaf-b0e277eeccd7", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637655, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637725-ac7f5486-2626-3863-5af6-a2b20aca87b2", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637725, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637752-94b7d5e9-5015-9629-a4d7-7b04a0a8f0f8", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637752, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999637799-c26df42b-6dff-4f74-82c7-754773e959ff", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637799, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999637831-09f1e404-9ccb-881f-5215-0b3401c05618", "fingerprint"=>2630776421, "url"=>"http://localhost:3000/", "timestamp"=>1690999637831, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999656113-c3be6f6d-869e-cc65-54d2-f09e59798ed9", "url"=>"http://localhost:3000/", "timestamp"=>1690999656113, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999656191-3d42b452-e54b-ad67-3189-3600733f7f6e", "url"=>"http://localhost:3000/", "timestamp"=>1690999656191, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999696988-421b4929-ffb4-e57d-7b9f-610c2e9963dd", "url"=>"http://localhost:3000/", "timestamp"=>1690999696988, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999697042-2c67bc2d-c0f3-0067-d1c2-cb060de9695b", "url"=>"http://localhost:3000/", "timestamp"=>1690999697042, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999722814-0a01c0ce-437c-9173-826a-ef1aa268acc3", "url"=>"http://localhost:3000/", "timestamp"=>1690999722814, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999722861-3655c7f0-63e5-9a32-f54f-8c7604c25b46", "url"=>"http://localhost:3000/", "timestamp"=>1690999722861, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999740274-37196e86-f384-b226-bf31-dd340d235378", "url"=>"http://localhost:3000/", "timestamp"=>1690999740274, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999740334-fc4c6cd0-ed13-c70e-27ba-0fc7058a341f", "url"=>"http://localhost:3000/", "timestamp"=>1690999740334, "device_data"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1690999847702-2873673b-369f-af5c-59d8-dd73301a990b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847702, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1690999847758-4c739ee6-29a3-ade6-0a8b-0b0fbe4a185b", "url"=>"http://localhost:3000/", "timestamp"=>1690999847758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000057410-a01822d8-c438-43ab-fb84-dcd32311f308", "url"=>"http://localhost:3000/", "timestamp"=>1691000057410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000057460-df1dbeee-abec-b858-3b49-211a56b181ff", "url"=>"http://localhost:3000/", "timestamp"=>1691000057460, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 35ms (ActiveRecord: 0.0ms | Allocations: 1620)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:20:12 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 32ms (ActiveRecord: 0.0ms | Allocations: 4646)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:20:22 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 26ms (ActiveRecord: 0.0ms | Allocations: 1549)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:20:32 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms | Allocations: 1552)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:20:42 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms | Allocations: 1546)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:20:52 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.0ms | Allocations: 1651)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:21:02 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms | Allocations: 1549)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:21:12 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.0ms | Allocations: 1546)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:21:22 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 27ms (ActiveRecord: 0.0ms | Allocations: 1546)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:21:32 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 45ms (ActiveRecord: 0.0ms | Allocations: 4645)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:21:42 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 38ms (ActiveRecord: 0.0ms | Allocations: 1546)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:21:52 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.0ms | Allocations: 1546)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:22:02 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 24ms (ActiveRecord: 0.0ms | Allocations: 1546)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:22:12 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 37ms (ActiveRecord: 0.0ms | Allocations: 4645)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:22:22 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.0ms | Allocations: 1546)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:22:32 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms | Allocations: 1579)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:22:43 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 30ms (ActiveRecord: 0.0ms | Allocations: 4642)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:22:53 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.0ms | Allocations: 1546)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:23:03 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.0ms | Allocations: 1546)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:23:13 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.0ms | Allocations: 1549)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:23:23 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.0ms | Allocations: 4642)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:23:33 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 25ms (ActiveRecord: 0.0ms | Allocations: 1546)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:24:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 45ms (ActiveRecord: 0.0ms | Allocations: 4645)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:25:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 25ms (ActiveRecord: 0.0ms | Allocations: 4642)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:26:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 27ms (ActiveRecord: 0.0ms | Allocations: 4642)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:27:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 42ms (ActiveRecord: 0.0ms | Allocations: 4645)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:28:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 24ms (Allocations: 4642)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:29:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 10ms (Allocations: 1955)


  
NameError (uninitialized constant ProcessDataJob::EventProcessors):
  
app/jobs/process_data_job.rb:6:in `<class:ProcessDataJob>'
app/jobs/process_data_job.rb:1:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:30:17 -0700
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.0ms | Allocations: 5603)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:31:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms | Allocations: 1570)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:32:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.0ms | Allocations: 4638)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:33:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.0ms | Allocations: 1577)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:34:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.0ms | Allocations: 4637)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:35:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 1575)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:36:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 34ms (ActiveRecord: 0.0ms | Allocations: 4637)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:37:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 42ms (ActiveRecord: 0.0ms | Allocations: 4637)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:38:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 49ms (ActiveRecord: 0.0ms | Allocations: 4643)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:39:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 36ms (ActiveRecord: 0.0ms | Allocations: 4637)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:40:07 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691000402833-4d884e1e-6fb8-8344-614f-0dd2004d72b3", "url"=>"http://localhost:3000/", "timestamp"=>1691000402833, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691000402882-4af47d96-b85e-deee-cb6a-b1a1338d7501", "url"=>"http://localhost:3000/", "timestamp"=>1691000402882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000402918-e43e83fd-6a03-d7f7-3ed5-c5344aa22ceb", "url"=>"http://localhost:3000/", "timestamp"=>1691000402918, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691000402977-7cbb3b71-5d93-3018-5655-28af7bc12179", "url"=>"http://localhost:3000/", "timestamp"=>1691000402977, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691000403039-6af0ffe0-22e0-7471-c21e-058e8cad40db", "url"=>"http://localhost:3000/", "timestamp"=>1691000403039, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 500 Internal Server Error in 27ms (ActiveRecord: 0.0ms | Allocations: 1569)


  
NameError (uninitialized constant EventProcessors):
  
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 11:40:29 -0700
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691001609705-cf891884-b5f6-49a8-b40b-45f6ac976546", "url"=>"http://localhost:3000/", "timestamp"=>1691001609705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691001609826-bcf32799-7fc9-4129-d5dd-22a008af1b54", "url"=>"http://localhost:3000/", "timestamp"=>1691001609826, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691001609873-7ebbee26-2e43-72e8-a079-d19ac4dfa6c3", "url"=>"http://localhost:3000/", "timestamp"=>1691001609873, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691001609930-e5c6ed5e-7bad-5f89-7294-154d780ce934", "url"=>"http://localhost:3000/", "timestamp"=>1691001609930, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691001610009-3f5be72d-2b9d-245a-4e2f-59ceb51ce598", "url"=>"http://localhost:3000/", "timestamp"=>1691001610009, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691001609705-cf891884-b5f6-49a8-b40b-45f6ac976546", "url"=>"http://localhost:3000/", "timestamp"=>1691001609705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691001609826-bcf32799-7fc9-4129-d5dd-22a008af1b54", "url"=>"http://localhost:3000/", "timestamp"=>1691001609826, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691001609873-7ebbee26-2e43-72e8-a079-d19ac4dfa6c3", "url"=>"http://localhost:3000/", "timestamp"=>1691001609873, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691001609930-e5c6ed5e-7bad-5f89-7294-154d780ce934", "url"=>"http://localhost:3000/", "timestamp"=>1691001609930, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691001610009-3f5be72d-2b9d-245a-4e2f-59ceb51ce598", "url"=>"http://localhost:3000/", "timestamp"=>1691001610009, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 6431)


Started POST "/api/v1/capture" for ::1 at 2023-08-02 12:42:06 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691005315916-3a967d81-a489-61d9-b6cf-3782b15984ec", "url"=>"http://localhost:3000/", "timestamp"=>1691005315916, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691005315996-3fecc299-8472-cfdb-72f8-62274bc363d0", "url"=>"http://localhost:3000/", "timestamp"=>1691005315996, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691005316049-45c68d3a-61c3-9e1f-fff6-2b20dd92b7c1", "url"=>"http://localhost:3000/", "timestamp"=>1691005316049, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691005316093-fe8160f0-9882-29ab-c412-cc45f8f835d6", "url"=>"http://localhost:3000/", "timestamp"=>1691005316093, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691005316135-44d4661e-2eca-2488-f464-2b8480364e61", "url"=>"http://localhost:3000/", "timestamp"=>1691005316135, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691005315916-3a967d81-a489-61d9-b6cf-3782b15984ec", "url"=>"http://localhost:3000/", "timestamp"=>1691005315916, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691005315996-3fecc299-8472-cfdb-72f8-62274bc363d0", "url"=>"http://localhost:3000/", "timestamp"=>1691005315996, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691005316049-45c68d3a-61c3-9e1f-fff6-2b20dd92b7c1", "url"=>"http://localhost:3000/", "timestamp"=>1691005316049, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691005316093-fe8160f0-9882-29ab-c412-cc45f8f835d6", "url"=>"http://localhost:3000/", "timestamp"=>1691005316093, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691005316135-44d4661e-2eca-2488-f464-2b8480364e61", "url"=>"http://localhost:3000/", "timestamp"=>1691005316135, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 7ms (Views: 0.2ms | Allocations: 2271)


  [1m[36mInstance Load (6.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mInstance Load (2.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mInstance Load (2.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mInstance Load (0.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mInstance Load (2.5ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mInstance Load (0.9ms)[0m  [1m[34mSELECT "instances".* FROM "instances" ORDER BY "instances"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mInstance Load (0.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" ORDER BY "instances"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDevice Load (4.5ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 /* loading for inspect */ LIMIT $2[0m  [["instance_id", 1], ["LIMIT", 11]]
  [1m[36mInstance Load (1.9ms)[0m  [1m[34mSELECT "instances".* FROM "instances" ORDER BY "instances"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (14.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "devices" WHERE "devices"."instance_id" = $1[0m  [["instance_id", 1]]
  [1m[36mDevice Load (0.5ms)[0m  [1m[34mSELECT "devices".* FROM "devices" ORDER BY "devices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/api/v1/capture" for ::1 at 2023-08-02 13:01:57 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691006507809-74a15b51-8a7c-14a2-1fec-b803776030c0", "url"=>"http://localhost:3000/", "timestamp"=>1691006507809, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691006507893-73e45de7-192b-8b38-c48c-7647cd50c1d1", "url"=>"http://localhost:3000/", "timestamp"=>1691006507893, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691006507938-110b280d-0680-b704-105b-85d34be309d3", "url"=>"http://localhost:3000/", "timestamp"=>1691006507938, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691006507974-72b0c030-e40e-aed6-7eb5-c46790ad9ee9", "url"=>"http://localhost:3000/", "timestamp"=>1691006507974, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691006508034-b6029c40-db05-28b7-a049-40d74d77206a", "url"=>"http://localhost:3000/", "timestamp"=>1691006508034, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691006507809-74a15b51-8a7c-14a2-1fec-b803776030c0", "url"=>"http://localhost:3000/", "timestamp"=>1691006507809, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691006507893-73e45de7-192b-8b38-c48c-7647cd50c1d1", "url"=>"http://localhost:3000/", "timestamp"=>1691006507893, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691006507938-110b280d-0680-b704-105b-85d34be309d3", "url"=>"http://localhost:3000/", "timestamp"=>1691006507938, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691006507974-72b0c030-e40e-aed6-7eb5-c46790ad9ee9", "url"=>"http://localhost:3000/", "timestamp"=>1691006507974, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691006508034-b6029c40-db05-28b7-a049-40d74d77206a", "url"=>"http://localhost:3000/", "timestamp"=>1691006508034, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 5ms (Views: 0.2ms | Allocations: 2276)


  [1m[36mInstance Load (0.8ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (1.1ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mDevice Create (5.1ms)[0m  [1m[32mINSERT INTO "devices" ("instance_id", "fingerprint", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["created_at", "2023-08-02 20:01:58.405190"], ["updated_at", "2023-08-02 20:01:58.405190"]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mInstance Load (4.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.8ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mInstance Load (0.6ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.6ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 13:03:03 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691006573749-37c04edc-5bce-1718-7e7f-496b9e00e267", "url"=>"http://localhost:3000/", "timestamp"=>1691006573749, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691006573799-7a1a0d61-f5fb-4042-2997-0dd4b680075b", "url"=>"http://localhost:3000/", "timestamp"=>1691006573799, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691006573834-7680e8d3-51b1-ba66-b28d-8e8366634956", "url"=>"http://localhost:3000/", "timestamp"=>1691006573834, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691006573871-86563ea3-9588-7c36-f5c9-e23e7457d58c", "url"=>"http://localhost:3000/", "timestamp"=>1691006573871, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691006573917-48010210-e317-f925-282c-31d19d289024", "url"=>"http://localhost:3000/", "timestamp"=>1691006573917, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691006573749-37c04edc-5bce-1718-7e7f-496b9e00e267", "url"=>"http://localhost:3000/", "timestamp"=>1691006573749, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691006573799-7a1a0d61-f5fb-4042-2997-0dd4b680075b", "url"=>"http://localhost:3000/", "timestamp"=>1691006573799, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691006573834-7680e8d3-51b1-ba66-b28d-8e8366634956", "url"=>"http://localhost:3000/", "timestamp"=>1691006573834, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691006573871-86563ea3-9588-7c36-f5c9-e23e7457d58c", "url"=>"http://localhost:3000/", "timestamp"=>1691006573871, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691006573917-48010210-e317-f925-282c-31d19d289024", "url"=>"http://localhost:3000/", "timestamp"=>1691006573917, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 6ms (Views: 0.2ms | Allocations: 2272)


  [1m[36mInstance Load (0.9ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mInstance Load (1.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 13:03:37 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691006607020-9c2864e5-29ad-67ac-20f7-fef8b56e6bf3", "url"=>"http://localhost:3000/", "timestamp"=>1691006607020, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691006607077-56608e9e-174a-2190-8aae-5701c4bbe525", "url"=>"http://localhost:3000/", "timestamp"=>1691006607077, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691006607123-2a140d87-14ed-20f7-0380-8e14cc3806a0", "url"=>"http://localhost:3000/", "timestamp"=>1691006607123, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691006607158-f4b6c20e-6dd1-9c3f-df82-aa465d1e43c9", "url"=>"http://localhost:3000/", "timestamp"=>1691006607158, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691006607195-3514e005-9c47-9f17-0c12-d2df7f273e17", "url"=>"http://localhost:3000/", "timestamp"=>1691006607195, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691006607020-9c2864e5-29ad-67ac-20f7-fef8b56e6bf3", "url"=>"http://localhost:3000/", "timestamp"=>1691006607020, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691006607077-56608e9e-174a-2190-8aae-5701c4bbe525", "url"=>"http://localhost:3000/", "timestamp"=>1691006607077, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691006607123-2a140d87-14ed-20f7-0380-8e14cc3806a0", "url"=>"http://localhost:3000/", "timestamp"=>1691006607123, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691006607158-f4b6c20e-6dd1-9c3f-df82-aa465d1e43c9", "url"=>"http://localhost:3000/", "timestamp"=>1691006607158, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691006607195-3514e005-9c47-9f17-0c12-d2df7f273e17", "url"=>"http://localhost:3000/", "timestamp"=>1691006607195, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 4ms (Views: 0.2ms | Allocations: 2275)


  [1m[36mInstance Load (0.5ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (6.6ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "uuid", "full_url", "url_host", "url_path", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["uuid", "page-1691006607020-9c2864e5-29ad-67ac-20f7-fef8b56e6bf3"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["created_at", "2023-08-02 20:03:37.306884"], ["updated_at", "2023-08-02 20:03:37.306884"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.5ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (0.6ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "uuid", "full_url", "url_host", "url_path", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["uuid", "page-1691006573749-37c04edc-5bce-1718-7e7f-496b9e00e267"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["created_at", "2023-08-02 20:03:40.811125"], ["updated_at", "2023-08-02 20:03:40.811125"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.8ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (11.8ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (1.0ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "uuid", "full_url", "url_host", "url_path", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["uuid", "page-1691006507809-74a15b51-8a7c-14a2-1fec-b803776030c0"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["created_at", "2023-08-02 20:03:52.306231"], ["updated_at", "2023-08-02 20:03:52.306231"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (0.9ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "uuid", "full_url", "url_host", "url_path", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["uuid", "page-1691006607020-9c2864e5-29ad-67ac-20f7-fef8b56e6bf3"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["created_at", "2023-08-02 20:03:55.052984"], ["updated_at", "2023-08-02 20:03:55.052984"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.1ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (0.5ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "uuid", "full_url", "url_host", "url_path", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["uuid", "page-1691006607020-9c2864e5-29ad-67ac-20f7-fef8b56e6bf3"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["created_at", "2023-08-02 20:04:18.015647"], ["updated_at", "2023-08-02 20:04:18.015647"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (1.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (2.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (1.7ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "uuid", "full_url", "url_host", "url_path", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["uuid", "page-1691006573749-37c04edc-5bce-1718-7e7f-496b9e00e267"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["created_at", "2023-08-02 20:04:23.153203"], ["updated_at", "2023-08-02 20:04:23.153203"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (15.3ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "uuid", "full_url", "url_host", "url_path", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["uuid", "page-1691006607020-9c2864e5-29ad-67ac-20f7-fef8b56e6bf3"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["created_at", "2023-08-02 20:05:04.246604"], ["updated_at", "2023-08-02 20:05:04.246604"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.7ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.5ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (1.3ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "uuid", "full_url", "url_host", "url_path", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["uuid", "page-1691006507809-74a15b51-8a7c-14a2-1fec-b803776030c0"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["created_at", "2023-08-02 20:06:05.152652"], ["updated_at", "2023-08-02 20:06:05.152652"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (1.4ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "uuid", "full_url", "url_host", "url_path", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["uuid", "page-1691006573749-37c04edc-5bce-1718-7e7f-496b9e00e267"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["created_at", "2023-08-02 20:06:22.598184"], ["updated_at", "2023-08-02 20:06:22.598184"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (1.7ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (1.1ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (21.1ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "uuid", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["device_id", 1], ["uuid", "page-1691005315916-3a967d81-a489-61d9-b6cf-3782b15984ec"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 19:41:55"], ["created_at", "2023-08-02 20:24:47.692693"], ["updated_at", "2023-08-02 20:24:47.692693"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691005315996-3fecc299-8472-cfdb-72f8-62274bc363d0", "url"=>"http://localhost:3000/", "timestamp"=>1691005315996, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691005316049-45c68d3a-61c3-9e1f-fff6-2b20dd92b7c1", "url"=>"http://localhost:3000/", "timestamp"=>1691005316049, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_assignment.rb:51:in `_assign_attribute'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/attribute_assignment.rb:21:in `block in _assign_attributes'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/attribute_assignment.rb:13:in `each'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/attribute_assignment.rb:13:in `_assign_attributes'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_assignment.rb:34:in `assign_attributes'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/core.rb:525:in `initialize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:54:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691005316093-fe8160f0-9882-29ab-c412-cc45f8f835d6", "url"=>"http://localhost:3000/", "timestamp"=>1691005316093, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691005316135-44d4661e-2eca-2488-f464-2b8480364e61", "url"=>"http://localhost:3000/", "timestamp"=>1691005316135, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_assignment.rb:51:in `_assign_attribute'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/attribute_assignment.rb:21:in `block in _assign_attributes'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/attribute_assignment.rb:13:in `each'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/attribute_assignment.rb:13:in `_assign_attributes'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_assignment.rb:34:in `assign_attributes'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/core.rb:525:in `initialize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:54:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 13:33:57 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "uuid"=>"page-1691008427233-8adb5a1f-206d-5b07-bf8f-490da8dd9727", "url"=>"http://localhost:3000/", "timestamp"=>1691008427233, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691008427337-0008e591-0c5e-1e6c-7074-cbbfa46d3411", "url"=>"http://localhost:3000/", "timestamp"=>1691008427337, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691008427388-cf54428b-cee8-754c-9f91-cadb46961fb4", "url"=>"http://localhost:3000/", "timestamp"=>1691008427388, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691008427424-70742917-cbb2-52c0-65aa-21e2c74e3a90", "url"=>"http://localhost:3000/", "timestamp"=>1691008427424, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691008427474-06ff9b8a-3331-d752-21ac-008f875493bb", "url"=>"http://localhost:3000/", "timestamp"=>1691008427474, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "uuid"=>"page-1691008427233-8adb5a1f-206d-5b07-bf8f-490da8dd9727", "url"=>"http://localhost:3000/", "timestamp"=>1691008427233, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "uuid"=>"identify-1691008427337-0008e591-0c5e-1e6c-7074-cbbfa46d3411", "url"=>"http://localhost:3000/", "timestamp"=>1691008427337, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691008427388-cf54428b-cee8-754c-9f91-cadb46961fb4", "url"=>"http://localhost:3000/", "timestamp"=>1691008427388, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691008427424-70742917-cbb2-52c0-65aa-21e2c74e3a90", "url"=>"http://localhost:3000/", "timestamp"=>1691008427424, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691008427474-06ff9b8a-3331-d752-21ac-008f875493bb", "url"=>"http://localhost:3000/", "timestamp"=>1691008427474, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 8ms (Views: 0.2ms | Allocations: 2358)


  [1m[36mInstance Load (1.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.9ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (2.3ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "uuid", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["device_id", 1], ["uuid", "page-1691008427233-8adb5a1f-206d-5b07-bf8f-490da8dd9727"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 20:33:47"], ["created_at", "2023-08-02 20:33:57.587081"], ["updated_at", "2023-08-02 20:33:57.587081"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691008427337-0008e591-0c5e-1e6c-7074-cbbfa46d3411", "url"=>"http://localhost:3000/", "timestamp"=>1691008427337, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691008427388-cf54428b-cee8-754c-9f91-cadb46961fb4", "url"=>"http://localhost:3000/", "timestamp"=>1691008427388, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_assignment.rb:51:in `_assign_attribute'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/attribute_assignment.rb:21:in `block in _assign_attributes'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/attribute_assignment.rb:13:in `each'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/attribute_assignment.rb:13:in `_assign_attributes'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_assignment.rb:34:in `assign_attributes'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/core.rb:525:in `initialize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:54:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691008427424-70742917-cbb2-52c0-65aa-21e2c74e3a90", "url"=>"http://localhost:3000/", "timestamp"=>1691008427424, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691008427474-06ff9b8a-3331-d752-21ac-008f875493bb", "url"=>"http://localhost:3000/", "timestamp"=>1691008427474, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_assignment.rb:51:in `_assign_attribute'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/attribute_assignment.rb:21:in `block in _assign_attributes'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/attribute_assignment.rb:13:in `each'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/attribute_assignment.rb:13:in `_assign_attributes'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_assignment.rb:34:in `assign_attributes'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/core.rb:525:in `initialize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:54:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mDevice Load (3.5ms)[0m  [1m[34mSELECT "devices".* FROM "devices" ORDER BY "devices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" ORDER BY "devices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDevice Load (3.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" ORDER BY "devices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDevice Load (1.6ms)[0m  [1m[34mSELECT "devices".* FROM "devices" ORDER BY "devices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDevice Load (0.5ms)[0m  [1m[34mSELECT "devices".* FROM "devices" ORDER BY "devices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDevice Load (1.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" ORDER BY "devices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDevice Load (1.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" ORDER BY "devices"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPageHit Load (4.4ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" ORDER BY "page_hits"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEvent Create (5.6ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "page_hit_id", "uuid", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["page_hit_id", 11], ["uuid", "uuiddddd!"], ["name", "some event?"], ["timestamp", "2023-08-02 20:44:05.285549"], ["created_at", "2023-08-02 20:49:05.287597"], ["updated_at", "2023-08-02 20:49:05.287597"]]
  [1m[36mMetadata Create (1.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 1], ["key", "something"], ["value", "yo"], ["created_at", "2023-08-02 20:49:05.295346"], ["updated_at", "2023-08-02 20:49:05.295346"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mMetadata Load (0.7ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["parent_id", 1], ["parent_type", "Event"], ["LIMIT", 11]]
  [1m[36mEvent Load (0.6ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMetadata Load (0.3ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2[0m  [["parent_id", 1], ["parent_type", "Event"]]
  [1m[36mEvent Load (14.9ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (1.1ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMetadata Load (0.4ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_type" = $1 AND "metadata"."parent_id" = $2[0m  [["parent_type", "Event"], ["parent_id", 1]]
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMetadata Load (0.3ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_type" = $1 AND "metadata"."parent_id" = $2[0m  [["parent_type", "Event"], ["parent_id", 1]]
Started POST "/api/v1/capture" for ::1 at 2023-08-02 14:42:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691012512123-3465273c-fa9d-82f7-ba51-ce40413fae1e", "url"=>"http://localhost:3000/", "timestamp"=>1691012512123, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012512257-200dc932-bd89-2496-d821-3d46ff316d87", "url"=>"http://localhost:3000/", "timestamp"=>1691012512257, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012529477-3d4aa218-e1bc-7f59-b46d-4623f77e9819", "url"=>"http://localhost:3000/", "timestamp"=>1691012529477, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012529518-d09eeeb7-5a0f-efe5-b63c-fe31951eb5e6", "url"=>"http://localhost:3000/", "timestamp"=>1691012529518, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691012512123-3465273c-fa9d-82f7-ba51-ce40413fae1e", "url"=>"http://localhost:3000/", "timestamp"=>1691012512123, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012512257-200dc932-bd89-2496-d821-3d46ff316d87", "url"=>"http://localhost:3000/", "timestamp"=>1691012512257, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012529477-3d4aa218-e1bc-7f59-b46d-4623f77e9819", "url"=>"http://localhost:3000/", "timestamp"=>1691012529477, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012529518-d09eeeb7-5a0f-efe5-b63c-fe31951eb5e6", "url"=>"http://localhost:3000/", "timestamp"=>1691012529518, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 9ms (Views: 0.2ms | Allocations: 2220)


  [1m[36mInstance Load (2.6ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012512123-3465273c-fa9d-82f7-ba51-ce40413fae1e", "url"=>"http://localhost:3000/", "timestamp"=>1691012512123, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.7ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012512257-200dc932-bd89-2496-d821-3d46ff316d87", "url"=>"http://localhost:3000/", "timestamp"=>1691012512257, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012529477-3d4aa218-e1bc-7f59-b46d-4623f77e9819", "url"=>"http://localhost:3000/", "timestamp"=>1691012529477, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012529518-d09eeeb7-5a0f-efe5-b63c-fe31951eb5e6", "url"=>"http://localhost:3000/", "timestamp"=>1691012529518, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 14:44:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691012597147-5d6e9994-1a93-5cb0-4cf4-1562945df5d7", "url"=>"http://localhost:3000/", "timestamp"=>1691012597147, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012597215-26ccd0bb-1b5d-a599-4b3d-77b6cca9b59d", "url"=>"http://localhost:3000/", "timestamp"=>1691012597215, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012597309-2e778317-26a4-b09c-d378-64cee892055a", "url"=>"http://localhost:3000/", "timestamp"=>1691012597309, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012597337-853d95a2-f452-ea6a-a35c-9209304829a6", "url"=>"http://localhost:3000/", "timestamp"=>1691012597337, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691012597147-5d6e9994-1a93-5cb0-4cf4-1562945df5d7", "url"=>"http://localhost:3000/", "timestamp"=>1691012597147, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012597215-26ccd0bb-1b5d-a599-4b3d-77b6cca9b59d", "url"=>"http://localhost:3000/", "timestamp"=>1691012597215, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012597309-2e778317-26a4-b09c-d378-64cee892055a", "url"=>"http://localhost:3000/", "timestamp"=>1691012597309, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012597337-853d95a2-f452-ea6a-a35c-9209304829a6", "url"=>"http://localhost:3000/", "timestamp"=>1691012597337, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 5ms (Views: 0.9ms | Allocations: 727)


  [1m[36mInstance Load (0.7ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012597147-5d6e9994-1a93-5cb0-4cf4-1562945df5d7", "url"=>"http://localhost:3000/", "timestamp"=>1691012597147, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.6ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012597215-26ccd0bb-1b5d-a599-4b3d-77b6cca9b59d", "url"=>"http://localhost:3000/", "timestamp"=>1691012597215, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012597309-2e778317-26a4-b09c-d378-64cee892055a", "url"=>"http://localhost:3000/", "timestamp"=>1691012597309, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012597337-853d95a2-f452-ea6a-a35c-9209304829a6", "url"=>"http://localhost:3000/", "timestamp"=>1691012597337, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 14:46:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691012749942-4d6175f9-a3b2-d8d6-ea4e-628890488411", "url"=>"http://localhost:3000/", "timestamp"=>1691012749942, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012749993-822625f5-9d47-6bb3-4551-ac2cc218a14c", "url"=>"http://localhost:3000/", "timestamp"=>1691012749993, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012766319-3c20f6ae-988a-2e5d-ef9d-9e419b77ee1d", "url"=>"http://localhost:3000/", "timestamp"=>1691012766319, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012766381-997c6df3-b957-5fd9-ab6d-0f0c682b0994", "url"=>"http://localhost:3000/", "timestamp"=>1691012766381, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012775915-0119c61c-f97d-8bc7-d19d-d569028969e9", "url"=>"http://localhost:3000/", "timestamp"=>1691012775915, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012775972-0227f796-922f-fe28-3174-86f22c395196", "url"=>"http://localhost:3000/", "timestamp"=>1691012775972, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691012749942-4d6175f9-a3b2-d8d6-ea4e-628890488411", "url"=>"http://localhost:3000/", "timestamp"=>1691012749942, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012749993-822625f5-9d47-6bb3-4551-ac2cc218a14c", "url"=>"http://localhost:3000/", "timestamp"=>1691012749993, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012766319-3c20f6ae-988a-2e5d-ef9d-9e419b77ee1d", "url"=>"http://localhost:3000/", "timestamp"=>1691012766319, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012766381-997c6df3-b957-5fd9-ab6d-0f0c682b0994", "url"=>"http://localhost:3000/", "timestamp"=>1691012766381, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012775915-0119c61c-f97d-8bc7-d19d-d569028969e9", "url"=>"http://localhost:3000/", "timestamp"=>1691012775915, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012775972-0227f796-922f-fe28-3174-86f22c395196", "url"=>"http://localhost:3000/", "timestamp"=>1691012775972, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 46ms (Views: 0.3ms | Allocations: 983)


  [1m[36mInstance Load (12.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012749942-4d6175f9-a3b2-d8d6-ea4e-628890488411", "url"=>"http://localhost:3000/", "timestamp"=>1691012749942, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012749993-822625f5-9d47-6bb3-4551-ac2cc218a14c", "url"=>"http://localhost:3000/", "timestamp"=>1691012749993, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012766319-3c20f6ae-988a-2e5d-ef9d-9e419b77ee1d", "url"=>"http://localhost:3000/", "timestamp"=>1691012766319, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012766381-997c6df3-b957-5fd9-ab6d-0f0c682b0994", "url"=>"http://localhost:3000/", "timestamp"=>1691012766381, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012775915-0119c61c-f97d-8bc7-d19d-d569028969e9", "url"=>"http://localhost:3000/", "timestamp"=>1691012775915, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012775972-0227f796-922f-fe28-3174-86f22c395196", "url"=>"http://localhost:3000/", "timestamp"=>1691012775972, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 14:47:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691012792354-27a56181-5b3a-882d-8dfe-0e483b24ca5e", "url"=>"http://localhost:3000/", "timestamp"=>1691012792354, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012792400-d0952454-5692-db71-95fa-10faff24fd5b", "url"=>"http://localhost:3000/", "timestamp"=>1691012792400, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012802727-09aa77a4-f334-057b-edd5-a92fdefb31b4", "url"=>"http://localhost:3000/", "timestamp"=>1691012802727, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012802785-a09547ab-78ec-4d92-5600-0d38d2d26d90", "url"=>"http://localhost:3000/", "timestamp"=>1691012802785, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012836059-c76933d2-d094-4a7e-e762-c16aaac6f717", "url"=>"http://localhost:3000/", "timestamp"=>1691012836059, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012836117-0f2ad8a1-1d71-0d0e-c501-019f9caf9cb8", "url"=>"http://localhost:3000/", "timestamp"=>1691012836117, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691012792354-27a56181-5b3a-882d-8dfe-0e483b24ca5e", "url"=>"http://localhost:3000/", "timestamp"=>1691012792354, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012792400-d0952454-5692-db71-95fa-10faff24fd5b", "url"=>"http://localhost:3000/", "timestamp"=>1691012792400, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012802727-09aa77a4-f334-057b-edd5-a92fdefb31b4", "url"=>"http://localhost:3000/", "timestamp"=>1691012802727, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012802785-a09547ab-78ec-4d92-5600-0d38d2d26d90", "url"=>"http://localhost:3000/", "timestamp"=>1691012802785, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012836059-c76933d2-d094-4a7e-e762-c16aaac6f717", "url"=>"http://localhost:3000/", "timestamp"=>1691012836059, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012836117-0f2ad8a1-1d71-0d0e-c501-019f9caf9cb8", "url"=>"http://localhost:3000/", "timestamp"=>1691012836117, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 3ms (Views: 0.3ms | Allocations: 980)


  [1m[36mInstance Load (0.6ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (12.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012792354-27a56181-5b3a-882d-8dfe-0e483b24ca5e", "url"=>"http://localhost:3000/", "timestamp"=>1691012792354, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012792400-d0952454-5692-db71-95fa-10faff24fd5b", "url"=>"http://localhost:3000/", "timestamp"=>1691012792400, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012802727-09aa77a4-f334-057b-edd5-a92fdefb31b4", "url"=>"http://localhost:3000/", "timestamp"=>1691012802727, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012802785-a09547ab-78ec-4d92-5600-0d38d2d26d90", "url"=>"http://localhost:3000/", "timestamp"=>1691012802785, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012836059-c76933d2-d094-4a7e-e762-c16aaac6f717", "url"=>"http://localhost:3000/", "timestamp"=>1691012836059, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012836117-0f2ad8a1-1d71-0d0e-c501-019f9caf9cb8", "url"=>"http://localhost:3000/", "timestamp"=>1691012836117, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 14:48:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691012843384-6b19743f-155b-5f73-0675-4443cf98f391", "url"=>"http://localhost:3000/", "timestamp"=>1691012843384, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012843450-375dffd5-ecde-accf-189f-8e54f37c8179", "url"=>"http://localhost:3000/", "timestamp"=>1691012843450, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012847894-360a2b1e-227b-de3e-54fc-dcddc9d9eefb", "url"=>"http://localhost:3000/", "timestamp"=>1691012847894, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012847949-909065ec-b362-ca0c-f001-3e7158eabe22", "url"=>"http://localhost:3000/", "timestamp"=>1691012847949, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012849058-d5f669d4-efed-1b8c-c7c6-a05da000f7f0", "url"=>"http://localhost:3000/", "timestamp"=>1691012849058, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012849096-4eb4aabe-2766-76e5-5bc8-a418b00bb82e", "url"=>"http://localhost:3000/", "timestamp"=>1691012849096, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691012843384-6b19743f-155b-5f73-0675-4443cf98f391", "url"=>"http://localhost:3000/", "timestamp"=>1691012843384, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012843450-375dffd5-ecde-accf-189f-8e54f37c8179", "url"=>"http://localhost:3000/", "timestamp"=>1691012843450, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012847894-360a2b1e-227b-de3e-54fc-dcddc9d9eefb", "url"=>"http://localhost:3000/", "timestamp"=>1691012847894, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012847949-909065ec-b362-ca0c-f001-3e7158eabe22", "url"=>"http://localhost:3000/", "timestamp"=>1691012847949, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691012849058-d5f669d4-efed-1b8c-c7c6-a05da000f7f0", "url"=>"http://localhost:3000/", "timestamp"=>1691012849058, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691012849096-4eb4aabe-2766-76e5-5bc8-a418b00bb82e", "url"=>"http://localhost:3000/", "timestamp"=>1691012849096, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 3ms (Views: 0.4ms | Allocations: 980)


  [1m[36mInstance Load (0.8ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012843384-6b19743f-155b-5f73-0675-4443cf98f391", "url"=>"http://localhost:3000/", "timestamp"=>1691012843384, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012843450-375dffd5-ecde-accf-189f-8e54f37c8179", "url"=>"http://localhost:3000/", "timestamp"=>1691012843450, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012847894-360a2b1e-227b-de3e-54fc-dcddc9d9eefb", "url"=>"http://localhost:3000/", "timestamp"=>1691012847894, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012847949-909065ec-b362-ca0c-f001-3e7158eabe22", "url"=>"http://localhost:3000/", "timestamp"=>1691012847949, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691012849058-d5f669d4-efed-1b8c-c7c6-a05da000f7f0", "url"=>"http://localhost:3000/", "timestamp"=>1691012849058, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691012849096-4eb4aabe-2766-76e5-5bc8-a418b00bb82e", "url"=>"http://localhost:3000/", "timestamp"=>1691012849096, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 14:55:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691013259684-7a080e54-05e4-27b5-9722-43b196e6bb31", "url"=>"http://localhost:3000/", "timestamp"=>1691013259684, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691013259730-233d367c-67de-eacc-49e5-3d4070a6ca4d", "url"=>"http://localhost:3000/", "timestamp"=>1691013259730, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691013274951-df2d5ee7-73a1-470c-fdf3-62e19aa8cf1d", "url"=>"http://localhost:3000/", "timestamp"=>1691013274951, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691013274998-dcff496a-a9e7-84d5-2428-093d82e8dcb7", "url"=>"http://localhost:3000/", "timestamp"=>1691013274998, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-51ae1c62-c42b-9b0b-2633-ff7c8121af0d", "url"=>"http://localhost:3000/", "timestamp"=>1691013276405, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-5258a26d-65d9-df5e-e024-e0f9c13e5847", "url"=>"http://localhost:3000/", "timestamp"=>1691013276451, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691013290163-1d092f43-c1e4-68e2-480a-3cae79eefe88", "url"=>"http://localhost:3000/", "timestamp"=>1691013290163, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691013290215-38cd36cf-1925-c1b7-992b-24d150a1b69f", "url"=>"http://localhost:3000/", "timestamp"=>1691013290215, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691013259684-7a080e54-05e4-27b5-9722-43b196e6bb31", "url"=>"http://localhost:3000/", "timestamp"=>1691013259684, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691013259730-233d367c-67de-eacc-49e5-3d4070a6ca4d", "url"=>"http://localhost:3000/", "timestamp"=>1691013259730, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691013274951-df2d5ee7-73a1-470c-fdf3-62e19aa8cf1d", "url"=>"http://localhost:3000/", "timestamp"=>1691013274951, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691013274998-dcff496a-a9e7-84d5-2428-093d82e8dcb7", "url"=>"http://localhost:3000/", "timestamp"=>1691013274998, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-51ae1c62-c42b-9b0b-2633-ff7c8121af0d", "url"=>"http://localhost:3000/", "timestamp"=>1691013276405, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-5258a26d-65d9-df5e-e024-e0f9c13e5847", "url"=>"http://localhost:3000/", "timestamp"=>1691013276451, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691013290163-1d092f43-c1e4-68e2-480a-3cae79eefe88", "url"=>"http://localhost:3000/", "timestamp"=>1691013290163, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691013290215-38cd36cf-1925-c1b7-992b-24d150a1b69f", "url"=>"http://localhost:3000/", "timestamp"=>1691013290215, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 18ms (Views: 1.1ms | Allocations: 1232)


  [1m[36mInstance Load (3.5ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691013259684-7a080e54-05e4-27b5-9722-43b196e6bb31", "url"=>"http://localhost:3000/", "timestamp"=>1691013259684, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.8ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691013259730-233d367c-67de-eacc-49e5-3d4070a6ca4d", "url"=>"http://localhost:3000/", "timestamp"=>1691013259730, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691013274951-df2d5ee7-73a1-470c-fdf3-62e19aa8cf1d", "url"=>"http://localhost:3000/", "timestamp"=>1691013274951, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691013274998-dcff496a-a9e7-84d5-2428-093d82e8dcb7", "url"=>"http://localhost:3000/", "timestamp"=>1691013274998, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-51ae1c62-c42b-9b0b-2633-ff7c8121af0d", "url"=>"http://localhost:3000/", "timestamp"=>1691013276405, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-5258a26d-65d9-df5e-e024-e0f9c13e5847", "url"=>"http://localhost:3000/", "timestamp"=>1691013276451, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691013290163-1d092f43-c1e4-68e2-480a-3cae79eefe88", "url"=>"http://localhost:3000/", "timestamp"=>1691013290163, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691013290215-38cd36cf-1925-c1b7-992b-24d150a1b69f", "url"=>"http://localhost:3000/", "timestamp"=>1691013290215, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 14:57:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691013377139-52f3ed62-7ce6-de8a-7ba6-ec2e992489e8", "url"=>"http://localhost:3000/", "timestamp"=>1691013377139, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691013377195-92d65733-07d0-7d06-59e1-183a41ac3103", "url"=>"http://localhost:3000/", "timestamp"=>1691013377195, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691013377255-91e913bf-f7cf-a08e-c8cf-652df6ddd732", "url"=>"http://localhost:3000/", "timestamp"=>1691013377255, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691013377293-23524092-af39-cfde-2e9c-34ae33fecd43", "url"=>"http://localhost:3000/", "timestamp"=>1691013377293, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691013377352-eb122960-d573-d3fd-88d9-86b360b6e05e", "url"=>"http://localhost:3000/", "timestamp"=>1691013377352, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691013377386-995bf698-cbc2-24d0-df84-d6e467d07654", "url"=>"http://localhost:3000/", "timestamp"=>1691013377386, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013377463, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013377492, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013377550, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013377583, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013408515, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013408592, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013415335, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013415400, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "uuid"=>"identify-1691013377139-52f3ed62-7ce6-de8a-7ba6-ec2e992489e8", "url"=>"http://localhost:3000/", "timestamp"=>1691013377139, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691013377195-92d65733-07d0-7d06-59e1-183a41ac3103", "url"=>"http://localhost:3000/", "timestamp"=>1691013377195, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691013377255-91e913bf-f7cf-a08e-c8cf-652df6ddd732", "url"=>"http://localhost:3000/", "timestamp"=>1691013377255, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691013377293-23524092-af39-cfde-2e9c-34ae33fecd43", "url"=>"http://localhost:3000/", "timestamp"=>1691013377293, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "uuid"=>"identify-1691013377352-eb122960-d573-d3fd-88d9-86b360b6e05e", "url"=>"http://localhost:3000/", "timestamp"=>1691013377352, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "uuid"=>"evt-1691013377386-995bf698-cbc2-24d0-df84-d6e467d07654", "url"=>"http://localhost:3000/", "timestamp"=>1691013377386, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013377463, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013377492, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013377550, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013377583, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013408515, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013408592, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013415335, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013415400, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 15ms (Views: 2.3ms | Allocations: 1918)


  [1m[36mInstance Load (1.9ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691013377139-52f3ed62-7ce6-de8a-7ba6-ec2e992489e8", "url"=>"http://localhost:3000/", "timestamp"=>1691013377139, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (12.8ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691013377195-92d65733-07d0-7d06-59e1-183a41ac3103", "url"=>"http://localhost:3000/", "timestamp"=>1691013377195, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691013377255-91e913bf-f7cf-a08e-c8cf-652df6ddd732", "url"=>"http://localhost:3000/", "timestamp"=>1691013377255, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691013377293-23524092-af39-cfde-2e9c-34ae33fecd43", "url"=>"http://localhost:3000/", "timestamp"=>1691013377293, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "uuid"=>"identify-1691013377352-eb122960-d573-d3fd-88d9-86b360b6e05e", "url"=>"http://localhost:3000/", "timestamp"=>1691013377352, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "uuid"=>"evt-1691013377386-995bf698-cbc2-24d0-df84-d6e467d07654", "url"=>"http://localhost:3000/", "timestamp"=>1691013377386, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013377463, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013377492, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013377550, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013377583, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013408515, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013408592, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013415335, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013415400, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 14:58:57 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013497148, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013497189, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013497235, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013497276, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013503164, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013503207, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013509106, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013509166, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013512862, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013512907, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013516576, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013516632, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013520337, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013520384, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013523146, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013523202, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013527048, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013527102, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013537628, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013537680, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013497148, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013497189, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013497235, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013497276, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013503164, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013503207, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013509106, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013509166, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013512862, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013512907, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013516576, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013516632, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013520337, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013520384, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013523146, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013523202, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013527048, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013527102, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013537628, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013537680, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 4ms (Views: 0.4ms | Allocations: 2564)


  [1m[36mInstance Load (0.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (12.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013497148, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013497189, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013497235, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013497276, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013503164, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013503207, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013509106, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013509166, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013512862, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013512907, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013516576, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013516632, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013520337, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013520384, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013523146, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013523202, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013527048, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013527102, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013537628, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013537680, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 14:59:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013542528, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013542569, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013542528, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013542569, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 8ms (Views: 2.1ms | Allocations: 458)


  [1m[36mInstance Load (1.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013542528, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.5ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013542569, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:01:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013617159, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013617227, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013617300, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013617323, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013617379, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013617406, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013617485, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013617512, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013619275, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013619326, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013617159, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013617227, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013617300, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013617323, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013617379, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013617406, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013617485, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013617512, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013619275, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013619326, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 12ms (Views: 0.3ms | Allocations: 1394)


  [1m[36mInstance Load (2.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (15.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013617159, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013617227, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013617300, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013617323, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013617379, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013617406, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013617485, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013617512, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691013619275, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691013619326, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:17:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014577095, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014577156, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014583007, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014583060, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014593490, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014593535, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014604088, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014604141, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014577095, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014577156, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014583007, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014583060, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014593490, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014593535, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014604088, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014604141, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 15ms (Views: 0.5ms | Allocations: 1160)


  [1m[36mInstance Load (2.6ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014577095, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (1.1ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014577156, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014583007, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014583060, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014593490, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014593535, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014604088, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014604141, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:21:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014817104, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014817145, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014823486, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014823533, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014846501, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014846544, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014817104, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014817145, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014823486, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014823533, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014846501, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014846544, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
  [1m[36mInstance Load (0.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
Completed 200 OK in 13ms (Views: 0.3ms | Allocations: 926)


  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014817104, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014817145, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014823486, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014823533, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014846501, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014846544, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:22:18 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691014928933, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014928969, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014929007, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014929046, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014929083, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691014928933, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014928969, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014929007, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014929046, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014929083, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 8ms (Views: 1.9ms | Allocations: 794)


  [1m[36mInstance Load (0.9ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.5ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (21.9ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 22:22:08"], ["created_at", "2023-08-02 22:22:19.084997"], ["updated_at", "2023-08-02 22:22:19.084997"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014928969, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014929007, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014929046, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014929083, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:23:24 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691014994557, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014994599, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014994648, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014994707, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014994743, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691014994557, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014994599, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014994648, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014994707, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014994743, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 15ms (Views: 0.3ms | Allocations: 793)


  [1m[36mInstance Load (0.8ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (1.8ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (2.3ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 22:23:14"], ["created_at", "2023-08-02 22:23:25.020738"], ["updated_at", "2023-08-02 22:23:25.020738"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (5.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014994599, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014994648, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691014994707, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691014994743, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:24:44 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015083749, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015083780, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015083749, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015083780, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 5ms (Views: 1.1ms | Allocations: 458)


  [1m[36mInstance Load (7.8ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015083749, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (13.1ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015083780, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:24:57 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691015087670, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015087717, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015087756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015087806, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015087851, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691015087670, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015087717, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015087756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015087806, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015087851, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 14ms (Views: 0.6ms | Allocations: 793)


  [1m[36mInstance Load (4.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (1.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (2.4ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 22:24:47"], ["created_at", "2023-08-02 22:24:57.788807"], ["updated_at", "2023-08-02 22:24:57.788807"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015087717, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015087756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015087806, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "traits"=>{"email"=>"collin@hello.com"}}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015087851, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:25:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015114626, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015114666, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015114626, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015114666, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 9ms (Views: 1.1ms | Allocations: 450)


  [1m[36mInstance Load (1.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015114626, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (51.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015114666, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:26:47 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-166d6c8c-8dc1-a0d8-5e82-7271206175f2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015204872, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-166d6c8c-8dc1-a0d8-5e82-7271206175f2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015204917, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-166d6c8c-8dc1-a0d8-5e82-7271206175f2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015204872, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-166d6c8c-8dc1-a0d8-5e82-7271206175f2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015204917, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 13ms (Views: 1.4ms | Allocations: 486)


  [1m[36mInstance Load (0.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (23.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-166d6c8c-8dc1-a0d8-5e82-7271206175f2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015204872, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (11.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-166d6c8c-8dc1-a0d8-5e82-7271206175f2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015204917, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:27:04 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691015214677, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015214723, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015214758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015214797, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015214840, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691015214677, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015214723, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015214758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015214797, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015214840, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 12ms (Views: 2.6ms | Allocations: 870)


  [1m[36mInstance Load (0.5ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (6.4ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 22:26:54"], ["created_at", "2023-08-02 22:27:04.742096"], ["updated_at", "2023-08-02 22:27:04.742096"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015214723, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015214758, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015214797, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8e1ea5e0-f747-d657-c60d-e96d9677a491", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015214840, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:27:33 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691015242997, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015243043, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015243078, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015243120, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015243157, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691015242997, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015243043, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015243078, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015243120, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015243157, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 16ms (Views: 5.9ms | Allocations: 869)


  [1m[36mInstance Load (0.6ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (1.0ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 22:27:22"], ["created_at", "2023-08-02 22:27:33.083394"], ["updated_at", "2023-08-02 22:27:33.083394"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015243043, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015243078, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015243120, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-8bf61570-ab64-b444-0d39-d46162f06d0c", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015243157, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:28:20 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691015290468, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015290539, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015290578, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015290629, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015290667, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691015290468, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015290539, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015290578, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015290629, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015290667, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 6ms (Views: 0.7ms | Allocations: 867)


  [1m[36mInstance Load (0.6ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (2.7ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (33.9ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 22:28:10"], ["created_at", "2023-08-02 22:28:20.543184"], ["updated_at", "2023-08-02 22:28:20.543184"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015290539, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015290578, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015290629, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-1dc1cb1e-b500-e1ab-2cb7-37a8e840e2ca", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015290667, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:28:53 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691015323812, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015323852, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015323882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015323920, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015323954, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691015323812, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015323852, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015323882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015323920, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015323954, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 4ms (Views: 0.8ms | Allocations: 867)


  [1m[36mInstance Load (12.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.9ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mPageHit Create (13.0ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 22:28:43"], ["created_at", "2023-08-02 22:28:53.877592"], ["updated_at", "2023-08-02 22:28:53.877592"]]
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:5:in `process!'
  [1m[36mInstance Load (1.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015323852, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015323882, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:4:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691015323920, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-38ae1bb2-070a-2e04-0c00-7319f232f4a2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691015323954, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/persistence.rb:55:in `create!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:51:11 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691016661616, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691016661679, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691016661718, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691016661753, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691016661788, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691016661616, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691016661679, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691016661718, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691016661753, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691016661788, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 19ms (Views: 0.3ms | Allocations: 2851)


  [1m[36mInstance Load (0.6ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.6ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 2], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mDevice Create (3.3ms)[0m  [1m[32mINSERT INTO "devices" ("instance_id", "fingerprint", "user_agent", "browser", "browser_version", "os", "os_version", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["instance_id", 2], ["fingerprint", "2630776421"], ["user_agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36"], ["browser", "Chrome"], ["browser_version", "115.0.0.0"], ["os", "Mac OS"], ["os_version", "10.15.7"], ["created_at", "2023-08-02 22:51:12.049075"], ["updated_at", "2023-08-02 22:51:12.049075"]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691016661616, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_methods.rb:469:in `method_missing'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (11.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 2], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691016661679, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 2], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691016661718, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:8:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 2], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691016661753, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 2], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691016661788, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:8:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:56:17 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691016968946, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691016969023, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691016970163, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691016970215, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691016968946, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691016969023, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691016970163, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691016970215, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 5ms (Views: 0.2ms | Allocations: 2256)


  [1m[36mInstance Load (0.7ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691016968946, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.9ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mDevice Create (13.6ms)[0m  [1m[32mINSERT INTO "devices" ("instance_id", "fingerprint", "user_agent", "browser", "browser_version", "os", "os_version", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["user_agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36"], ["browser", "Chrome"], ["browser_version", "115.0.0.0"], ["os", "Mac OS"], ["os_version", "10.15.7"], ["created_at", "2023-08-02 22:56:17.275374"], ["updated_at", "2023-08-02 22:56:17.275374"]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691016969023, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:8:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691016970163, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.6ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-61232d1f-5824-fe03-ac40-154891e52050", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691016970215, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:8:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:57:54 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017064272, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017064335, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017064371, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017064419, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017064452, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017064272, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017064335, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017064371, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017064419, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017064452, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 7ms (Views: 0.3ms | Allocations: 2373)


  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017064272, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_methods.rb:469:in `method_missing'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017064335, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017064371, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:8:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017064419, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e6f5fb4e-cb12-4df4-3a3d-6afe3bd7d733", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017064452, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:8:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 15:59:58 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017188480, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017188521, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017188575, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017188615, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017188657, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017188480, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017188521, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017188575, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017188615, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017188657, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 9ms (Views: 0.2ms | Allocations: 2476)


  [1m[36mInstance Load (1.8ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: undefined method `sessions' for #<Instance:0x0000000144bd9918>
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017188480, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_methods.rb:469:in `method_missing'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017188521, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: undefined method `sessions' for #<Instance:0x0000000136822e90>
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017188575, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_methods.rb:469:in `method_missing'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:19:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:7:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017188615, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: undefined method `sessions' for #<Instance:0x0000000136913480>
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-3a164f2c-1400-ab14-ead0-548909c6d27b", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017188657, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activemodel-6.1.7.4/lib/active_model/attribute_methods.rb:469:in `method_missing'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:19:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:7:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:01:01 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017251688, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017251729, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017251765, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017251810, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017251844, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017251688, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017251729, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017251765, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017251810, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017251844, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 5ms (Views: 0.2ms | Allocations: 2384)


  [1m[36mInstance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.9ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: PG::UndefinedColumn: ERROR:  column sessions.instance_id does not exist
LINE 1: SELECT "sessions".* FROM "sessions" WHERE "sessions"."instan...
                                                  ^

{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017251688, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:741:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:741:in `block in prepare_statement'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:736:in `prepare_statement'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:682:in `exec_cache'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `execute_and_clear'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql/database_statements.rb:55:in `exec_query'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:536:in `select_prepared'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:67:in `select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `block in select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:118:in `block in cache_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:109:in `cache_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/querying.rb:47:in `find_by_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:843:in `block in exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:861:in `skip_query_cache_if_necessary'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:828:in `exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/association_relation.rb:54:in `exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:631:in `load'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:249:in `records'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:524:in `find_take'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:98:in `take'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:81:in `find_by'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:168:in `find_or_create_by'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (11.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017251729, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: PG::UndefinedColumn: ERROR:  column sessions.instance_id does not exist
LINE 1: SELECT "sessions".* FROM "sessions" WHERE "sessions"."instan...
                                                  ^

{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017251765, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:741:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:741:in `block in prepare_statement'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:736:in `prepare_statement'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:682:in `exec_cache'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `execute_and_clear'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql/database_statements.rb:55:in `exec_query'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:536:in `select_prepared'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:67:in `select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `block in select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:118:in `block in cache_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:109:in `cache_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/querying.rb:47:in `find_by_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:843:in `block in exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:861:in `skip_query_cache_if_necessary'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:828:in `exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/association_relation.rb:54:in `exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:631:in `load'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:249:in `records'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:524:in `find_take'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:98:in `take'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:81:in `find_by'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:168:in `find_or_create_by'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:19:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:7:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017251810, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: PG::UndefinedColumn: ERROR:  column sessions.instance_id does not exist
LINE 1: SELECT "sessions".* FROM "sessions" WHERE "sessions"."instan...
                                                  ^

{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-dec6a831-4127-b335-a808-34b0b4d9ce49", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017251844, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:741:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:741:in `block in prepare_statement'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:736:in `prepare_statement'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:682:in `exec_cache'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `execute_and_clear'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql/database_statements.rb:55:in `exec_query'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:536:in `select_prepared'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:67:in `select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `block in select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:118:in `block in cache_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:109:in `cache_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/querying.rb:47:in `find_by_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:843:in `block in exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:861:in `skip_query_cache_if_necessary'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:828:in `exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/association_relation.rb:54:in `exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:631:in `load'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:249:in `records'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:524:in `find_take'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:98:in `take'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:81:in `find_by'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:168:in `find_or_create_by'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:19:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:7:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:02:35 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017345616, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017345666, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017345704, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017345759, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017345796, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017345616, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017345666, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017345704, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017345759, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017345796, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 12ms (Views: 0.2ms | Allocations: 2662)


  [1m[36mInstance Load (0.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: PG::UndefinedColumn: ERROR:  column sessions.uuid does not exist
LINE 1: ... "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"...
                                                             ^
HINT:  Perhaps you meant to reference the column "sessions.id".

{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017345616, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:741:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:741:in `block in prepare_statement'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:736:in `prepare_statement'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:682:in `exec_cache'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `execute_and_clear'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql/database_statements.rb:55:in `exec_query'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:536:in `select_prepared'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:67:in `select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `block in select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:118:in `block in cache_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:109:in `cache_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/querying.rb:47:in `find_by_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:843:in `block in exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:861:in `skip_query_cache_if_necessary'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:828:in `exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/association_relation.rb:54:in `exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:631:in `load'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:249:in `records'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:524:in `find_take'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:98:in `take'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:81:in `find_by'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:168:in `find_or_create_by'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017345666, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: PG::UndefinedColumn: ERROR:  column sessions.uuid does not exist
LINE 1: ... "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"...
                                                             ^
HINT:  Perhaps you meant to reference the column "sessions.id".

{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017345704, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:741:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:741:in `block in prepare_statement'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:736:in `prepare_statement'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:682:in `exec_cache'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `execute_and_clear'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql/database_statements.rb:55:in `exec_query'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:536:in `select_prepared'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:67:in `select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `block in select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:118:in `block in cache_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:109:in `cache_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/querying.rb:47:in `find_by_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:843:in `block in exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:861:in `skip_query_cache_if_necessary'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:828:in `exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/association_relation.rb:54:in `exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:631:in `load'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:249:in `records'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:524:in `find_take'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:98:in `take'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:81:in `find_by'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:168:in `find_or_create_by'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:19:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:7:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017345759, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Error processing event: PG::UndefinedColumn: ERROR:  column sessions.uuid does not exist
LINE 1: ... "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"...
                                                             ^
HINT:  Perhaps you meant to reference the column "sessions.id".

{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-71336cd6-28dd-d9cc-538b-cfb88c891eca", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017345796, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:741:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:741:in `block in prepare_statement'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:736:in `prepare_statement'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:682:in `exec_cache'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `execute_and_clear'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/postgresql/database_statements.rb:55:in `exec_query'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:536:in `select_prepared'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:67:in `select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `block in select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:118:in `block in cache_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:109:in `cache_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/query_cache.rb:101:in `select_all'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/querying.rb:47:in `find_by_sql'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:843:in `block in exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:861:in `skip_query_cache_if_necessary'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:828:in `exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/association_relation.rb:54:in `exec_queries'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:631:in `load'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:249:in `records'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:524:in `find_take'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:98:in `take'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation/finder_methods.rb:81:in `find_by'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:168:in `find_or_create_by'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:19:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:7:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:03:20 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017390223, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017390265, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017390305, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017390347, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017390384, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017390223, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017390265, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017390305, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017390347, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017390384, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 6ms (Views: 0.2ms | Allocations: 2672)


  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.9ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mPageHit Create (16.0ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "unique_identifier", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["device_id", 1], ["unique_identifier", "pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 23:03:10"], ["created_at", "2023-08-02 23:03:20.569226"], ["updated_at", "2023-08-02 23:03:20.569226"]]
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017390265, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
Error processing event: You cannot call create unless the parent is saved
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017390305, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:348:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:20:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:7:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017390347, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.1ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mCACHE Session Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
Error processing event: You cannot call create unless the parent is saved
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-053a91eb-4b2a-25d8-b9db-a873e7a03b34", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017390384, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:348:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:20:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:7:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:04:12 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017442179, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017442221, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017442267, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017442322, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017442363, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017442179, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017442221, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017442267, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017442322, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017442363, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 12ms (Views: 0.3ms | Allocations: 2674)


  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.3ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017442179, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017442221, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mCACHE Session Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017442267, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:19:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:7:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017442322, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mCACHE Session Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
Error processing event: Validation failed: Organization must exist
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-709c5cb7-f06c-5693-22ca-6b7bb2e6b3fb", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017442363, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:80:in `raise_validation_error'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/validations.rb:53:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `block in save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:318:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:350:in `with_transaction_returning_status'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:302:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/suppressor.rb:48:in `save!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:371:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:58:in `insert_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:358:in `block (2 levels) in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:462:in `replace_on_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:283:in `add_to_target'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:357:in `block in _create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:136:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `block in transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/connection_adapters/abstract/database_statements.rb:320:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/transactions.rb:209:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:135:in `transaction'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:355:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:19:in `find_or_create_session'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:19:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:7:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:05:20 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017510631, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017510683, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017510726, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017510759, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017510795, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017510631, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017510683, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017510726, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017510759, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017510795, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf"}}]}}
Completed 200 OK in 5ms (Views: 0.4ms | Allocations: 2374)


  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mSession Create (17.8ms)[0m  [1m[32mINSERT INTO "sessions" ("device_id", "unique_identifier", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["start_time", "2023-08-02 23:05:10"], ["created_at", "2023-08-02 23:05:20.955650"], ["updated_at", "2023-08-02 23:05:20.955650"]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mPageHit Create (0.6ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "session_id", "unique_identifier", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["device_id", 1], ["session_id", 1], ["unique_identifier", "pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 23:05:10"], ["created_at", "2023-08-02 23:05:21.007304"], ["updated_at", "2023-08-02 23:05:21.007304"]]
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mInstance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("instance_id", "unique_identifier", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["email", "collin@hello.com"], ["created_at", "2023-08-02 23:05:21.054174"], ["updated_at", "2023-08-02 23:05:21.054174"]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:13:in `process!'
  [1m[36mDevice Update (1.2ms)[0m  [1m[33mUPDATE "devices" SET "user_id" = $1, "updated_at" = $2 WHERE "devices"."id" = $3[0m  [["user_id", 1], ["updated_at", "2023-08-02 23:05:21.065163"], ["id", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `process!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:13:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.3ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (2.6ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 1], ["unique_identifier", "pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:20:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (2.8ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["device_id", 1], ["page_hit_id", 2], ["name", "pdf downloaded"], ["timestamp", "2023-08-02 23:05:10"], ["created_at", "2023-08-02 23:05:21.126648"], ["updated_at", "2023-08-02 23:05:21.126648"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (1.7ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 1], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:05:21.131674"], ["updated_at", "2023-08-02 23:05:21.131674"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:15:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 1], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:05:21.136506"], ["updated_at", "2023-08-02 23:05:21.136506"]]
  ↳ app/lib/event_processors/custom.rb:15:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:15:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:11:in `process!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.3ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.3ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 1], ["unique_identifier", "pv-7f6e890d-87e3-2dd3-e9c8-8bddad334269"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:20:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.3ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["device_id", 1], ["page_hit_id", 2], ["name", "pdf downloaded"], ["timestamp", "2023-08-02 23:05:10"], ["created_at", "2023-08-02 23:05:21.149986"], ["updated_at", "2023-08-02 23:05:21.149986"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 2], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:05:21.152212"], ["updated_at", "2023-08-02 23:05:21.152212"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:15:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 2], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:05:21.155340"], ["updated_at", "2023-08-02 23:05:21.155340"]]
  ↳ app/lib/event_processors/custom.rb:15:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:15:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:07:49 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017659290, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017659337, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017659369, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017659410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017659446, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691017659290, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017659337, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017659369, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691017659410, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691017659446, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 5ms (Views: 0.4ms | Allocations: 2425)


  [1m[36mInstance Load (2.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.6ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mSession Create (0.8ms)[0m  [1m[32mINSERT INTO "sessions" ("device_id", "unique_identifier", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["start_time", "2023-08-02 23:07:39"], ["created_at", "2023-08-02 23:07:49.618969"], ["updated_at", "2023-08-02 23:07:49.618969"]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mPageHit Create (0.5ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "session_id", "unique_identifier", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["unique_identifier", "pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 23:07:39"], ["created_at", "2023-08-02 23:07:49.645486"], ["updated_at", "2023-08-02 23:07:49.645486"]]
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mInstance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("instance_id", "unique_identifier", "email", "first_name", "last_name", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["email", "collin@hello.com"], ["first_name", "Collin"], ["last_name", "Schneider"], ["created_at", "2023-08-02 23:07:49.667976"], ["updated_at", "2023-08-02 23:07:49.667976"]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:11:in `process!'
Device 1 changed ownership from 1 to 2
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:13:in `process!'
  [1m[36mDevice Update (0.3ms)[0m  [1m[33mUPDATE "devices" SET "user_id" = $1, "updated_at" = $2 WHERE "devices"."id" = $3[0m  [["user_id", 2], ["updated_at", "2023-08-02 23:07:49.684092"], ["id", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `process!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:13:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.1ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.3ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:21:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.4ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 3], ["name", "pdf downloaded"], ["timestamp", "2023-08-02 23:07:39"], ["created_at", "2023-08-02 23:07:49.724568"], ["updated_at", "2023-08-02 23:07:49.724568"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 3], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:07:49.727113"], ["updated_at", "2023-08-02 23:07:49.727113"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 3], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-02 23:07:49.728629"], ["updated_at", "2023-08-02 23:07:49.728629"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:16:in `process!'
  [1m[36mMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 3], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:07:49.731968"], ["updated_at", "2023-08-02 23:07:49.731968"]]
  ↳ app/lib/event_processors/custom.rb:16:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 3], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-02 23:07:49.735058"], ["updated_at", "2023-08-02 23:07:49.735058"]]
  ↳ app/lib/event_processors/custom.rb:16:in `process!'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:16:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:11:in `process!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.3ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-d385e6bd-b1af-c552-22d6-f8b25e6c1f20"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:21:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.5ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 3], ["name", "pdf downloaded"], ["timestamp", "2023-08-02 23:07:39"], ["created_at", "2023-08-02 23:07:49.747963"], ["updated_at", "2023-08-02 23:07:49.747963"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 4], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:07:49.750288"], ["updated_at", "2023-08-02 23:07:49.750288"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 4], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-02 23:07:49.751819"], ["updated_at", "2023-08-02 23:07:49.751819"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:16:in `process!'
  [1m[36mMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 4], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:07:49.755724"], ["updated_at", "2023-08-02 23:07:49.755724"]]
  ↳ app/lib/event_processors/custom.rb:16:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 4], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-02 23:07:49.758538"], ["updated_at", "2023-08-02 23:07:49.758538"]]
  ↳ app/lib/event_processors/custom.rb:16:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:16:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:28:19 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-4ec85ead-febc-b668-cb68-9b49950dabf3", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691018889729, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-4ec85ead-febc-b668-cb68-9b49950dabf3", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691018889773, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-4ec85ead-febc-b668-cb68-9b49950dabf3", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691018889809, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-4ec85ead-febc-b668-cb68-9b49950dabf3", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691018889860, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-4ec85ead-febc-b668-cb68-9b49950dabf3", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691018889926, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-4ec85ead-febc-b668-cb68-9b49950dabf3", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691018889729, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-4ec85ead-febc-b668-cb68-9b49950dabf3", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691018889773, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-4ec85ead-febc-b668-cb68-9b49950dabf3", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691018889809, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-4ec85ead-febc-b668-cb68-9b49950dabf3", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691018889860, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-4ec85ead-febc-b668-cb68-9b49950dabf3", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691018889926, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 23ms (Views: 0.2ms | Allocations: 2419)


  [1m[36mInstance Load (1.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (2.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (1.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mPageHit Create (3.9ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "session_id", "unique_identifier", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["unique_identifier", "pv-4ec85ead-febc-b668-cb68-9b49950dabf3"], ["full_url", "http://localhost:3000/pricing"], ["url_host", "localhost"], ["url_path", "/pricing"], ["start_time", "2023-08-02 23:28:09"], ["created_at", "2023-08-02 23:28:20.137371"], ["updated_at", "2023-08-02 23:28:20.137371"]]
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mDevice Load (0.6ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:11:in `process!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (1.4ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.7ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-4ec85ead-febc-b668-cb68-9b49950dabf3"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (1.8ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 4], ["name", "pdf downloaded"], ["timestamp", "2023-08-02 23:28:09"], ["created_at", "2023-08-02 23:28:20.191173"], ["updated_at", "2023-08-02 23:28:20.191173"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 5], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:28:20.194906"], ["updated_at", "2023-08-02 23:28:20.194906"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 5], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-02 23:28:20.196712"], ["updated_at", "2023-08-02 23:28:20.196712"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:11:in `process!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.3ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.3ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-4ec85ead-febc-b668-cb68-9b49950dabf3"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.3ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 4], ["name", "pdf downloaded"], ["timestamp", "2023-08-02 23:28:09"], ["created_at", "2023-08-02 23:28:20.208253"], ["updated_at", "2023-08-02 23:28:20.208253"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 6], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:28:20.210403"], ["updated_at", "2023-08-02 23:28:20.210403"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 6], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-02 23:28:20.211762"], ["updated_at", "2023-08-02 23:28:20.211762"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:29:19 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-53992667-5838-a1c6-89ec-d86a5a2b81ce", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691018955797, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-53992667-5838-a1c6-89ec-d86a5a2b81ce", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691018955797, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}]}}
Completed 200 OK in 3ms (Views: 0.6ms | Allocations: 352)


  [1m[36mInstance Load (3.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (14.7ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.7ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mPageHit Create (0.6ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "session_id", "unique_identifier", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["unique_identifier", "pv-53992667-5838-a1c6-89ec-d86a5a2b81ce"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 23:29:15"], ["created_at", "2023-08-02 23:29:19.829978"], ["updated_at", "2023-08-02 23:29:19.829978"]]
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mTRANSACTION (13.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:29:59 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e634574b-9da3-7ce4-9205-ec7c6aae43a2", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691018990254, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e634574b-9da3-7ce4-9205-ec7c6aae43a2", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691018990254, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/"}}]}}
Completed 200 OK in 4ms (Views: 0.7ms | Allocations: 352)


  [1m[36mInstance Load (4.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.6ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.4ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mPageHit Create (0.7ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "session_id", "unique_identifier", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["unique_identifier", "pv-e634574b-9da3-7ce4-9205-ec7c6aae43a2"], ["full_url", "http://localhost:3000/pricing"], ["url_host", "localhost"], ["url_path", "/pricing"], ["start_time", "2023-08-02 23:29:50"], ["created_at", "2023-08-02 23:29:59.797592"], ["updated_at", "2023-08-02 23:29:59.797592"]]
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:30:29 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e634574b-9da3-7ce4-9205-ec7c6aae43a2", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019023191, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e634574b-9da3-7ce4-9205-ec7c6aae43a2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019023239, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e634574b-9da3-7ce4-9205-ec7c6aae43a2", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019023191, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-e634574b-9da3-7ce4-9205-ec7c6aae43a2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019023239, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 3ms (Views: 1.0ms | Allocations: 508)


  [1m[36mInstance Load (0.7ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mDevice Load (0.5ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:11:in `process!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (15.5ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.6ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-e634574b-9da3-7ce4-9205-ec7c6aae43a2"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.8ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 6], ["name", "pdf downloaded"], ["timestamp", "2023-08-02 23:30:23"], ["created_at", "2023-08-02 23:30:29.815035"], ["updated_at", "2023-08-02 23:30:29.815035"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 7], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:30:29.819596"], ["updated_at", "2023-08-02 23:30:29.819596"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 7], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-02 23:30:29.822208"], ["updated_at", "2023-08-02 23:30:29.822208"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:30:45 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-6639564a-629d-75dc-5613-fa7ad85c673d", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019045621, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-6639564a-629d-75dc-5613-fa7ad85c673d", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691019045699, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-6639564a-629d-75dc-5613-fa7ad85c673d", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691019045732, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-6639564a-629d-75dc-5613-fa7ad85c673d", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691019045774, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-6639564a-629d-75dc-5613-fa7ad85c673d", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691019045810, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-6639564a-629d-75dc-5613-fa7ad85c673d", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019045621, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-6639564a-629d-75dc-5613-fa7ad85c673d", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691019045699, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-6639564a-629d-75dc-5613-fa7ad85c673d", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691019045732, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-6639564a-629d-75dc-5613-fa7ad85c673d", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691019045774, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-6639564a-629d-75dc-5613-fa7ad85c673d", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691019045810, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 5ms (Views: 0.7ms | Allocations: 915)


  [1m[36mInstance Load (0.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (13.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.5ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mPageHit Create (2.5ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "session_id", "unique_identifier", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["unique_identifier", "pv-6639564a-629d-75dc-5613-fa7ad85c673d"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["start_time", "2023-08-02 23:30:45"], ["created_at", "2023-08-02 23:30:45.970577"], ["updated_at", "2023-08-02 23:30:45.970577"]]
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mDevice Load (0.1ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:11:in `process!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (23.6ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.3ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-6639564a-629d-75dc-5613-fa7ad85c673d"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.3ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 7], ["name", "pdf downloaded"], ["timestamp", "2023-08-02 23:30:45"], ["created_at", "2023-08-02 23:30:46.019455"], ["updated_at", "2023-08-02 23:30:46.019455"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 8], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:30:46.022061"], ["updated_at", "2023-08-02 23:30:46.022061"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 8], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-02 23:30:46.024095"], ["updated_at", "2023-08-02 23:30:46.024095"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mInstance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:11:in `process!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.2ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-6639564a-629d-75dc-5613-fa7ad85c673d"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.3ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 7], ["name", "pdf downloaded"], ["timestamp", "2023-08-02 23:30:45"], ["created_at", "2023-08-02 23:30:46.040399"], ["updated_at", "2023-08-02 23:30:46.040399"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 9], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-02 23:30:46.043282"], ["updated_at", "2023-08-02 23:30:46.043282"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 9], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-02 23:30:46.045380"], ["updated_at", "2023-08-02 23:30:46.045380"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:31:15 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2bc36b98-c2c1-4d56-f672-f2c82a0bc24b", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019075823, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2bc36b98-c2c1-4d56-f672-f2c82a0bc24b", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019075823, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/"}}]}}
Completed 200 OK in 4ms (Views: 1.2ms | Allocations: 352)


  [1m[36mInstance Load (0.8ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.5ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (36.3ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mPageHit Create (0.6ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "session_id", "unique_identifier", "full_url", "url_host", "url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["unique_identifier", "pv-2bc36b98-c2c1-4d56-f672-f2c82a0bc24b"], ["full_url", "http://localhost:3000/pricing"], ["url_host", "localhost"], ["url_path", "/pricing"], ["start_time", "2023-08-02 23:31:15"], ["created_at", "2023-08-02 23:31:16.049108"], ["updated_at", "2023-08-02 23:31:16.049108"]]
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:35:41 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331663, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331663, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}]}}
Completed 500 Internal Server Error in 3ms (Allocations: 862)


  
SyntaxError (/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
        start_time: timestamp,
                  ^
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end):
  
app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end
app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:35:51 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331663, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331663, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}]}}
Completed 500 Internal Server Error in 8ms (Allocations: 491)


  
SyntaxError (/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
        start_time: timestamp,
                  ^
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end):
  
app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end
app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:36:01 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331663, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331663, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}]}}
Completed 500 Internal Server Error in 4ms (Allocations: 491)


  
SyntaxError (/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
        start_time: timestamp,
                  ^
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end):
  
app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end
app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:36:11 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331663, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331663, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}]}}
Completed 500 Internal Server Error in 3ms (Allocations: 493)


  
SyntaxError (/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
        start_time: timestamp,
                  ^
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end):
  
app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end
app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:36:21 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331663, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331663, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}]}}
Completed 500 Internal Server Error in 21ms (Allocations: 3552)


  
SyntaxError (/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
        start_time: timestamp,
                  ^
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end):
  
app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end
app/lib/event_processors/page_view.rb:13: syntax error, unexpected '\n', expecting =>
app/lib/event_processors/page_view.rb:17: syntax error, unexpected ':', expecting end
app/lib/event_processors/page_view.rb:42: syntax error, unexpected end-of-input, expecting end
app/jobs/process_data_job.rb:2:in `<main>'
app/controllers/api/v1/capture_controller.rb:5:in `process_data'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:36:31 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331663, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331663, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331756, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}]}}
Completed 200 OK in 7ms (Views: 0.2ms | Allocations: 2712)


  [1m[36mInstance Load (2.8ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (1.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (1.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
Error processing event: undefined method `parsed_referrer?' for #<EventProcessors::PageView:0x0000000156fa2510>
Did you mean?  parsed_referrer
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:31:in `referrer_url_host'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:14:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:11:in `process!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mCACHE Session Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (5.5ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
Error processing event: bad URI(is not URI?): nil
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/rfc3986_parser.rb:18:in `rescue in split'
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/rfc3986_parser.rb:15:in `split'
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/rfc3986_parser.rb:73:in `parse'
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/common.rb:234:in `parse'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:24:in `block in find_or_create_page_hit'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:323:in `block in build_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/core.rb:527:in `initialize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/reflection.rb:157:in `build_association'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:321:in `build_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:354:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:8:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:11:in `process!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mCACHE Session Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mCACHE PageHit Load (0.0ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
Error processing event: bad URI(is not URI?): nil
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-2a557d9c-3a1e-4bdc-5e71-8ca161d82103", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019331801, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/rfc3986_parser.rb:18:in `rescue in split'
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/rfc3986_parser.rb:15:in `split'
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/rfc3986_parser.rb:73:in `parse'
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/common.rb:234:in `parse'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:24:in `block in find_or_create_page_hit'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:323:in `block in build_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/core.rb:527:in `initialize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/reflection.rb:157:in `build_association'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:321:in `build_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:354:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:8:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mCACHE Session Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
Error processing event: undefined method `parsed_referrer?' for #<EventProcessors::PageView:0x0000000144a95b60>
Did you mean?  parsed_referrer
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-625dd958-1870-f420-43c8-3f7d8d603d41", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019338353, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:31:in `referrer_url_host'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:14:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:36:56 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019406867, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691019406906, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691019406943, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691019406986, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691019407023, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019406867, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691019406906, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691019406943, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691019406986, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691019407023, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 9ms (Views: 0.6ms | Allocations: 2572)


  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.3ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
Error processing event: undefined method `parsed_referrer?' for #<EventProcessors::PageView:0x00000001369c4a78>
Did you mean?  parsed_referrer
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019406867, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:30:in `referrer_url_host'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:13:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:11:in `process!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mCACHE Session Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.2ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-f0705a6c-4725-d48e-c98f-9b7b21dec984"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
Error processing event: bad URI(is not URI?): nil
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691019406943, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/rfc3986_parser.rb:18:in `rescue in split'
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/rfc3986_parser.rb:15:in `split'
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/rfc3986_parser.rb:73:in `parse'
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/common.rb:234:in `parse'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:24:in `block in find_or_create_page_hit'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:323:in `block in build_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/core.rb:527:in `initialize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/reflection.rb:157:in `build_association'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:321:in `build_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:354:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:8:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:5:in `process!'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:11:in `process!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mCACHE Session Load (0.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mCACHE PageHit Load (0.0ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-f0705a6c-4725-d48e-c98f-9b7b21dec984"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
Error processing event: bad URI(is not URI?): nil
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-f0705a6c-4725-d48e-c98f-9b7b21dec984", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691019407023, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/rfc3986_parser.rb:18:in `rescue in split'
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/rfc3986_parser.rb:15:in `split'
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/rfc3986_parser.rb:73:in `parse'
/Users/collin/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/uri/common.rb:234:in `parse'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:24:in `block in find_or_create_page_hit'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:323:in `block in build_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/core.rb:527:in `initialize'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/inheritance.rb:72:in `new'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/reflection.rb:157:in `build_association'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:321:in `build_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_association.rb:354:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/has_many_association.rb:137:in `_create_record'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/association.rb:209:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/associations/collection_proxy.rb:364:in `create!'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activerecord-6.1.7.4/lib/active_record/relation.rb:175:in `find_or_create_by!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:8:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:37:06 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d6c6b91d-0894-afee-2f74-4fcc6fd8e4e5", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019425618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d6c6b91d-0894-afee-2f74-4fcc6fd8e4e5", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019425618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/"}}]}}
Completed 200 OK in 2ms (Views: 0.5ms | Allocations: 352)


  [1m[36mInstance Load (1.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.7ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (17.6ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
Error processing event: undefined method `parsed_referrer?' for #<EventProcessors::PageView:0x0000000144cb0f08>
Did you mean?  parsed_referrer
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d6c6b91d-0894-afee-2f74-4fcc6fd8e4e5", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019425618, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:30:in `referrer_url_host'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:13:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:38:06 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-75dd6243-3abf-d0f1-2e36-d770a6380153", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019483135, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-75dd6243-3abf-d0f1-2e36-d770a6380153", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019483135, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}]}}
  [1m[36mInstance Load (1.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
Completed 200 OK in 63ms (Views: 60.9ms | Allocations: 352)


  [1m[36mSession Load (21.5ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
Error processing event: undefined method `parsed_referrer?' for #<EventProcessors::PageView:0x0000000156e085b0>
Did you mean?  parsed_referrer
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-75dd6243-3abf-d0f1-2e36-d770a6380153", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019483135, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:30:in `referrer_url_host'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:13:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:39:16 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-964d5df0-ff27-f505-deec-6f168b92be36", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019551627, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-964d5df0-ff27-f505-deec-6f168b92be36", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019551627, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/"}}]}}
Completed 200 OK in 9ms (Views: 0.7ms | Allocations: 1982)


Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:40:26 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-bce21e0d-5026-fc38-de46-b2c4b0d6b28f", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019621263, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-bce21e0d-5026-fc38-de46-b2c4b0d6b28f", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691019621263, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}]}}
Completed 200 OK in 8ms (Views: 0.2ms | Allocations: 2106)


  [1m[36mInstance Load (0.5ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
Error processing event: undefined method `parsed_referrer?' for #<EventProcessors::PageView:0x0000000115c56730>
Did you mean?  parsed_referrer
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-964d5df0-ff27-f505-deec-6f168b92be36", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019551627, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:30:in `referrer_url_host'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:13:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:15:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mPageHit Create (3.2ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "session_id", "unique_identifier", "full_url", "url_host", "url_path", "referrer_full_url", "referrer_url_host", "referrer_url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["unique_identifier", "pv-bce21e0d-5026-fc38-de46-b2c4b0d6b28f"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["referrer_full_url", "http://localhost:3000/pricing"], ["referrer_url_host", "localhost"], ["referrer_url_path", "/pricing"], ["start_time", "2023-08-02 23:40:21"], ["created_at", "2023-08-02 23:41:09.422167"], ["updated_at", "2023-08-02 23:41:09.422167"]]
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 16:42:36 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d4e7344a-40a5-ef29-8754-a5365ba523f6", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019751369, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d4e7344a-40a5-ef29-8754-a5365ba523f6", "type"=>"page", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691019751369, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/"}}]}}
Completed 200 OK in 9ms (Views: 0.6ms | Allocations: 2007)


  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mPageHit Create (0.5ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "session_id", "unique_identifier", "full_url", "url_host", "url_path", "referrer_full_url", "referrer_url_host", "referrer_url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["unique_identifier", "pv-d4e7344a-40a5-ef29-8754-a5365ba523f6"], ["full_url", "http://localhost:3000/pricing"], ["url_host", "localhost"], ["url_path", "/pricing"], ["referrer_full_url", "http://localhost:3000/"], ["referrer_url_host", "localhost"], ["referrer_url_path", "/"], ["start_time", "2023-08-02 23:42:31"], ["created_at", "2023-08-02 23:42:37.177808"], ["updated_at", "2023-08-02 23:42:37.177808"]]
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mEvent Load (2.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.8ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMetadata Load (0.7ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 /* loading for inspect */ LIMIT $3[0m  [["parent_id", 9], ["parent_type", "Event"], ["LIMIT", 11]]
  [1m[36mEvent Load (16.5ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMetadata Load (0.5ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 9], ["parent_type", "Event"], ["key", "filename"], ["LIMIT", 1]]
  [1m[36mEvent Load (14.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mMetadata Load (0.5ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 9], ["parent_type", "Event"], ["key", "filenamezzzzz"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (16.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMetadata Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" = $3 LIMIT $4[0m  [["key", "filenamezzzzz"], ["parent_type", "Event"], ["parent_id", 9], ["LIMIT", 1]]
  [1m[36mMetadata Create (2.6ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 9], ["key", "filenamezzzzz"], ["value", "hi"], ["created_at", "2023-08-03 00:26:37.900174"], ["updated_at", "2023-08-03 00:26:37.900174"]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/v1/capture" for ::1 at 2023-08-02 17:34:16 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d4e7344a-40a5-ef29-8754-a5365ba523f6", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691022852189, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d4e7344a-40a5-ef29-8754-a5365ba523f6", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691022852285, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d4e7344a-40a5-ef29-8754-a5365ba523f6", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691022852430, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d4e7344a-40a5-ef29-8754-a5365ba523f6", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691022852508, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691022854543, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d4e7344a-40a5-ef29-8754-a5365ba523f6", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691022852189, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d4e7344a-40a5-ef29-8754-a5365ba523f6", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691022852285, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d4e7344a-40a5-ef29-8754-a5365ba523f6", "type"=>"identify", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691022852430, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-d4e7344a-40a5-ef29-8754-a5365ba523f6", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/pricing", "timestamp"=>1691022852508, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691022854543, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>"http://localhost:3000/pricing"}}]}}
Completed 200 OK in 15ms (Views: 1.0ms | Allocations: 2967)


  [1m[36mInstance Load (1.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (0.6ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" = $3 LIMIT $4[0m  [["key", "dogsName"], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Create (3.9ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "User"], ["parent_id", 2], ["key", "dogsName"], ["value", "Bogey"], ["created_at", "2023-08-03 00:34:17.277269"], ["updated_at", "2023-08-03 00:34:17.277269"]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (3.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mInstance Load (1.8ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (1.6ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (7.3ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-d4e7344a-40a5-ef29-8754-a5365ba523f6"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (1.4ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 10], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:34:12"], ["created_at", "2023-08-03 00:34:17.378098"], ["updated_at", "2023-08-03 00:34:17.378098"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 10], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:34:17.381137"], ["updated_at", "2023-08-03 00:34:17.381137"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 10], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:34:17.382922"], ["updated_at", "2023-08-03 00:34:17.382922"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (0.3ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "dogsName"], ["id", 24], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Load (0.2ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "stripeCustomerId"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" = $3 LIMIT $4[0m  [["key", "stripeCustomerId"], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "User"], ["parent_id", 2], ["key", "stripeCustomerId"], ["value", "cust-xyz123"], ["created_at", "2023-08-03 00:34:17.398869"], ["updated_at", "2023-08-03 00:34:17.398869"]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.3ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.3ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-d4e7344a-40a5-ef29-8754-a5365ba523f6"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.3ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 10], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:34:12"], ["created_at", "2023-08-03 00:34:17.415682"], ["updated_at", "2023-08-03 00:34:17.415682"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 11], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:34:17.417282"], ["updated_at", "2023-08-03 00:34:17.417282"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 11], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:34:17.418955"], ["updated_at", "2023-08-03 00:34:17.418955"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mPageHit Create (0.5ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "session_id", "unique_identifier", "full_url", "url_host", "url_path", "referrer_full_url", "referrer_url_host", "referrer_url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["unique_identifier", "pv-9ee5676b-01e2-5211-e56e-bb545200e3c2"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["referrer_full_url", "http://localhost:3000/pricing"], ["referrer_url_host", "localhost"], ["referrer_url_path", "/pricing"], ["start_time", "2023-08-03 00:34:14"], ["created_at", "2023-08-03 00:34:17.425587"], ["updated_at", "2023-08-03 00:34:17.425587"]]
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 17:42:16 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023276894, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023276964, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023276894, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023276964, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 3ms (Views: 0.4ms | Allocations: 522)


  [1m[36mInstance Load (1.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (0.8ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "dogsName"], ["id", 24], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Load (0.3ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "stripeCustomerId"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "stripeCustomerId"], ["id", 27], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (1.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (1.0ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (1.0ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-9ee5676b-01e2-5211-e56e-bb545200e3c2"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (3.1ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (2.4ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 11], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:41:16"], ["created_at", "2023-08-03 00:42:17.006094"], ["updated_at", "2023-08-03 00:42:17.006094"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 12], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:42:17.010470"], ["updated_at", "2023-08-03 00:42:17.010470"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 12], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:42:17.012665"], ["updated_at", "2023-08-03 00:42:17.012665"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 17:44:16 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023427367, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023427437, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023440748, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023440804, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023427367, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023427437, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023440748, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023440804, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 2ms (Views: 0.5ms | Allocations: 820)


  [1m[36mInstance Load (1.9ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (0.3ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (14.0ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "dogsName"], ["id", 24], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Load (0.4ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "stripeCustomerId"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "stripeCustomerId"], ["id", 27], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (0.5ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (12.8ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.6ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-9ee5676b-01e2-5211-e56e-bb545200e3c2"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (1.3ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 11], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:43:47"], ["created_at", "2023-08-03 00:44:16.965978"], ["updated_at", "2023-08-03 00:44:16.965978"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 13], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:44:16.969412"], ["updated_at", "2023-08-03 00:44:16.969412"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 13], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:44:16.971730"], ["updated_at", "2023-08-03 00:44:16.971730"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mInstance Load (0.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (0.5ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "dogsName"], ["id", 24], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Load (0.4ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "stripeCustomerId"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "stripeCustomerId"], ["id", 27], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.6ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-9ee5676b-01e2-5211-e56e-bb545200e3c2"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.4ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 11], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:44:00"], ["created_at", "2023-08-03 00:44:17.019908"], ["updated_at", "2023-08-03 00:44:17.019908"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 14], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:44:17.021937"], ["updated_at", "2023-08-03 00:44:17.021937"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 14], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:44:17.023613"], ["updated_at", "2023-08-03 00:44:17.023613"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 17:46:16 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023516919, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023516970, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023517035, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023517061, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023556705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023556764, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023516919, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023516970, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023517035, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023517061, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023556705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023556764, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 16ms (Views: 0.2ms | Allocations: 1119)


  [1m[36mInstance Load (0.8ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (0.7ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "dogsName"], ["id", 24], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Load (1.1ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "stripeCustomerId"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "stripeCustomerId"], ["id", 27], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.5ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.3ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-9ee5676b-01e2-5211-e56e-bb545200e3c2"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.6ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 11], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:45:16"], ["created_at", "2023-08-03 00:46:16.964093"], ["updated_at", "2023-08-03 00:46:16.964093"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 15], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:46:16.967589"], ["updated_at", "2023-08-03 00:46:16.967589"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 15], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:46:16.969529"], ["updated_at", "2023-08-03 00:46:16.969529"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mInstance Load (0.7ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (0.1ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "dogsName"], ["id", 24], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Load (0.1ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "stripeCustomerId"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "stripeCustomerId"], ["id", 27], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.2ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-9ee5676b-01e2-5211-e56e-bb545200e3c2"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.4ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 11], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:45:17"], ["created_at", "2023-08-03 00:46:17.005913"], ["updated_at", "2023-08-03 00:46:17.005913"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 16], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:46:17.007989"], ["updated_at", "2023-08-03 00:46:17.007989"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 16], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:46:17.013426"], ["updated_at", "2023-08-03 00:46:17.013426"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mInstance Load (0.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (0.2ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "dogsName"], ["id", 24], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Load (0.2ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "stripeCustomerId"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "stripeCustomerId"], ["id", 27], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (0.4ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.6ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.4ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-9ee5676b-01e2-5211-e56e-bb545200e3c2"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.3ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 11], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:45:56"], ["created_at", "2023-08-03 00:46:17.059301"], ["updated_at", "2023-08-03 00:46:17.059301"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 17], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:46:17.061992"], ["updated_at", "2023-08-03 00:46:17.061992"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 17], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:46:17.064331"], ["updated_at", "2023-08-03 00:46:17.064331"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 17:48:16 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023662910, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023663011, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023681863, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023681921, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023662910, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023663011, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023681863, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023681921, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 3ms (Views: 1.1ms | Allocations: 820)


  [1m[36mInstance Load (1.9ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (15.4ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (11.7ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "dogsName"], ["id", 24], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Load (0.1ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "stripeCustomerId"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "stripeCustomerId"], ["id", 27], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.4ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.3ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-9ee5676b-01e2-5211-e56e-bb545200e3c2"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.6ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 11], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:47:43"], ["created_at", "2023-08-03 00:48:16.989463"], ["updated_at", "2023-08-03 00:48:16.989463"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 18], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:48:16.991548"], ["updated_at", "2023-08-03 00:48:16.991548"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 18], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:48:16.993329"], ["updated_at", "2023-08-03 00:48:16.993329"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (0.2ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "dogsName"], ["id", 24], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Load (1.2ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "stripeCustomerId"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "stripeCustomerId"], ["id", 27], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (0.1ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.2ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-9ee5676b-01e2-5211-e56e-bb545200e3c2"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.8ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 11], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:48:01"], ["created_at", "2023-08-03 00:48:17.021409"], ["updated_at", "2023-08-03 00:48:17.021409"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 19], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:48:17.023472"], ["updated_at", "2023-08-03 00:48:17.023472"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 19], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:48:17.024962"], ["updated_at", "2023-08-03 00:48:17.024962"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 17:50:16 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023797653, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023797709, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023812877, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023812944, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023797653, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023797709, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691023812877, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691023812944, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 6ms (Views: 2.8ms | Allocations: 820)


  [1m[36mInstance Load (0.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (1.5ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (15.0ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "dogsName"], ["id", 24], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Load (0.3ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "stripeCustomerId"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "stripeCustomerId"], ["id", 27], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.2ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-9ee5676b-01e2-5211-e56e-bb545200e3c2"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.3ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 11], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:49:57"], ["created_at", "2023-08-03 00:50:16.951173"], ["updated_at", "2023-08-03 00:50:16.951173"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 20], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:50:16.953113"], ["updated_at", "2023-08-03 00:50:16.953113"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 20], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:50:16.954738"], ["updated_at", "2023-08-03 00:50:16.954738"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mInstance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (0.1ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "dogsName"], ["id", 24], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Load (0.1ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "stripeCustomerId"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "stripeCustomerId"], ["id", 27], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.1ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-9ee5676b-01e2-5211-e56e-bb545200e3c2"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.4ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 11], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:50:12"], ["created_at", "2023-08-03 00:50:16.981019"], ["updated_at", "2023-08-03 00:50:16.981019"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 21], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:50:16.982686"], ["updated_at", "2023-08-03 00:50:16.982686"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 21], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:50:16.984214"], ["updated_at", "2023-08-03 00:50:16.984214"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
Started POST "/api/v1/capture" for ::1 at 2023-08-02 17:57:16 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691024190325, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691024190402, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691024190325, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691024190402, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 20ms (Views: 0.2ms | Allocations: 2250)


  [1m[36mInstance Load (2.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mMetadata Load (1.1ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "dogsName"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "dogsName"], ["id", 24], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Load (0.2ms)[0m  [1m[34mSELECT "metadata".* FROM "metadata" WHERE "metadata"."parent_id" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."key" = $3 LIMIT $4[0m  [["parent_id", 2], ["parent_type", "User"], ["key", "stripeCustomerId"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:32:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."id" != $2 AND "metadata"."parent_type" = $3 AND "metadata"."parent_id" = $4 LIMIT $5[0m  [["key", "stripeCustomerId"], ["id", 27], ["parent_type", "User"], ["parent_id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:34:in `block in create_or_update_metadata!'
  [1m[36mDevice Load (1.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.8ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-1afd95f6-cdcc-fc91-5193-af6cf9aef611"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (1.0ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 2], ["unique_identifier", "pv-9ee5676b-01e2-5211-e56e-bb545200e3c2"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (2.0ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 2], ["page_hit_id", 11], ["name", "pdf downloaded"], ["timestamp", "2023-08-03 00:56:30"], ["created_at", "2023-08-03 00:57:17.218736"], ["updated_at", "2023-08-03 00:57:17.218736"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 22], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-03 00:57:17.222036"], ["updated_at", "2023-08-03 00:57:17.222036"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 22], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-03 00:57:17.223688"], ["updated_at", "2023-08-03 00:57:17.223688"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/api/v1/capture" for ::1 at 2023-08-03 08:49:46 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691077726832, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691077726928, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691077726832, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}, {"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691077726928, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 14ms (Views: 1.3ms | Allocations: 523)


  [1m[36mInstance Load (5.4ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
Error processing event: Instance not found for api_key: abc-123
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691077726832, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"collin@hello.com", "firstName"=>"Collin", "lastName"=>"Schneider", "dogsName"=>"Bogey", "stripeCustomerId"=>"cust-xyz123"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:15:in `rescue in instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:12:in `instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
Error processing event: Instance not found for api_key: abc-123
{"sessionId"=>"s-1afd95f6-cdcc-fc91-5193-af6cf9aef611", "pageViewId"=>"pv-9ee5676b-01e2-5211-e56e-bb545200e3c2", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691077726928, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:15:in `rescue in instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:12:in `instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:26:in `find_or_create_device'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-07 13:16:42 -0700
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691439392512, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"sub event?", "url"=>"http://localhost:3000/", "timestamp"=>1691439392590, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"something"=>"else"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691439392657, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"hello@gmail.com"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691439392705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"sub event?", "url"=>"http://localhost:3000/", "timestamp"=>1691439392747, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"something"=>"else"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691439392832, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"hello@gmail.com"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691439392916, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691439392512, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"sub event?", "url"=>"http://localhost:3000/", "timestamp"=>1691439392590, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"something"=>"else"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691439392657, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"hello@gmail.com"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691439392705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"sub event?", "url"=>"http://localhost:3000/", "timestamp"=>1691439392747, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"something"=>"else"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691439392832, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"hello@gmail.com"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691439392916, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 29ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 6608)


  [1m[36mInstance Load (3.6ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
Error processing event: Instance not found for api_key: abc-123
{"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691439392512, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:15:in `rescue in instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:12:in `instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:26:in `find_or_create_device'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/page_view.rb:5:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
Error processing event: Instance not found for api_key: abc-123
{"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"sub event?", "url"=>"http://localhost:3000/", "timestamp"=>1691439392590, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"something"=>"else"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:15:in `rescue in instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:12:in `instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:26:in `find_or_create_device'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
Error processing event: Instance not found for api_key: abc-123
{"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691439392657, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"hello@gmail.com"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:15:in `rescue in instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:12:in `instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
Error processing event: Instance not found for api_key: abc-123
{"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691439392705, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:15:in `rescue in instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:12:in `instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:26:in `find_or_create_device'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
Error processing event: Instance not found for api_key: abc-123
{"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"sub event?", "url"=>"http://localhost:3000/", "timestamp"=>1691439392747, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"something"=>"else"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:15:in `rescue in instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:12:in `instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:26:in `find_or_create_device'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
Error processing event: Instance not found for api_key: abc-123
{"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691439392832, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"hello@gmail.com"}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:15:in `rescue in instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:12:in `instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/identify.rb:4:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
Error processing event: Instance not found for api_key: abc-123
{"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-2e1f63ed-73ec-ed82-5f29-a23ae56fadf4", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691439392916, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:15:in `rescue in instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:12:in `instance'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/base.rb:26:in `find_or_create_device'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/lib/event_processors/custom.rb:6:in `process!'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:14:in `block in perform'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `each'
/Users/collin/Code/swishjam/backend/instrumentation_api/app/jobs/process_data_job.rb:11:in `perform'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:202:in `execute_job'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:170:in `block (2 levels) in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/middleware/chain.rb:172:in `invoke'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:169:in `block in process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:136:in `block (6 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:113:in `local'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:135:in `block (5 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:14:in `block in call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/execution_wrapper.rb:91:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/activesupport-6.1.7.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/rails.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:131:in `block (4 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:263:in `stats'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:126:in `block (3 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:13:in `call'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:125:in `block (2 levels) in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_retry.rb:80:in `global'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:124:in `block in dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/job_logger.rb:39:in `prepare'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:123:in `dispatch'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:168:in `process'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:78:in `process_one'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/processor.rb:68:in `run'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:8:in `watchdog'
/Users/collin/.rvm/gems/ruby-2.6.3/gems/sidekiq-6.5.9/lib/sidekiq/component.rb:17:in `block in safe_thread'
Started POST "/api/v1/capture" for ::1 at 2023-08-07 13:17:33 -0700
Processing by Api::V1::CaptureController#process_data as */*
  Parameters: {"_json"=>[{"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691439443026, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"sub event?", "url"=>"http://localhost:3000/", "timestamp"=>1691439443077, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"something"=>"else"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691439443114, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"hello@gmail.com"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691439443151, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"sub event?", "url"=>"http://localhost:3000/", "timestamp"=>1691439443190, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"something"=>"else"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691439443230, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"hello@gmail.com"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691439443274, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}], "capture"=>{"_json"=>[{"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"page", "url"=>"http://localhost:3000/", "timestamp"=>1691439443026, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"previousUrl"=>""}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"sub event?", "url"=>"http://localhost:3000/", "timestamp"=>1691439443077, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"something"=>"else"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691439443114, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"hello@gmail.com"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691439443151, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"sub event?", "url"=>"http://localhost:3000/", "timestamp"=>1691439443190, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"something"=>"else"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"identify", "url"=>"http://localhost:3000/", "timestamp"=>1691439443230, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"userId"=>"user-123", "email"=>"hello@gmail.com"}}, {"sessionId"=>"s-2a1313f0-e586-d757-08a4-be88a8658b5d", "pageViewId"=>"pv-7dfa2d63-0f02-706c-96b3-179ff141e266", "type"=>"pdf downloaded", "url"=>"http://localhost:3000/", "timestamp"=>1691439443274, "deviceData"=>{"fingerprint"=>2630776421, "userAgent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36", "browser"=>"Chrome", "browserVersion"=>"115.0.0.0", "os"=>"Mac OS", "osVersion"=>"10.15.7", "timezone"=>"-07", "language"=>"en-US"}, "data"=>{"filename"=>"example.pdf", "size"=>1234}}]}}
Completed 200 OK in 8ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 1142)


  [1m[36mInstance Load (4.3ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (2.8ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mDevice Create (4.2ms)[0m  [1m[32mINSERT INTO "devices" ("instance_id", "fingerprint", "user_agent", "browser", "browser_version", "os", "os_version", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["user_agent", "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Safari/537.36"], ["browser", "Chrome"], ["browser_version", "115.0.0.0"], ["os", "Mac OS"], ["os_version", "10.15.7"], ["created_at", "2023-08-07 20:17:33.242882"], ["updated_at", "2023-08-07 20:17:33.242882"]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (1.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-2a1313f0-e586-d757-08a4-be88a8658b5d"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mSession Create (1.9ms)[0m  [1m[32mINSERT INTO "sessions" ("device_id", "unique_identifier", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["device_id", 1], ["unique_identifier", "s-2a1313f0-e586-d757-08a4-be88a8658b5d"], ["start_time", "2023-08-07 20:17:23"], ["created_at", "2023-08-07 20:17:33.270199"], ["updated_at", "2023-08-07 20:17:33.270199"]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mPageHit Create (3.1ms)[0m  [1m[32mINSERT INTO "page_hits" ("device_id", "session_id", "unique_identifier", "full_url", "url_host", "url_path", "referrer_full_url", "referrer_url_path", "start_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["device_id", 1], ["session_id", 1], ["unique_identifier", "pv-7dfa2d63-0f02-706c-96b3-179ff141e266"], ["full_url", "http://localhost:3000/"], ["url_host", "localhost"], ["url_path", "/"], ["referrer_full_url", ""], ["referrer_url_path", ""], ["start_time", "2023-08-07 20:17:23"], ["created_at", "2023-08-07 20:17:33.293110"], ["updated_at", "2023-08-07 20:17:33.293110"]]
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/page_view.rb:4:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-2a1313f0-e586-d757-08a4-be88a8658b5d"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.3ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 1], ["unique_identifier", "pv-7dfa2d63-0f02-706c-96b3-179ff141e266"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "something"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (17.9ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 1], ["page_hit_id", 1], ["name", "sub event?"], ["timestamp", "2023-08-07 20:17:23"], ["created_at", "2023-08-07 20:17:33.332887"], ["updated_at", "2023-08-07 20:17:33.332887"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 1], ["key", "something"], ["value", "else"], ["created_at", "2023-08-07 20:17:33.352509"], ["updated_at", "2023-08-07 20:17:33.352509"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mUser Create (3.0ms)[0m  [1m[32mINSERT INTO "users" ("instance_id", "unique_identifier", "email", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["email", "hello@gmail.com"], ["created_at", "2023-08-07 20:17:33.378677"], ["updated_at", "2023-08-07 20:17:33.378677"]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mDevice Load (0.3ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/identify.rb:24:in `update_devices_owner_if_necessary!'
  [1m[36mDevice Update (0.9ms)[0m  [1m[33mUPDATE "devices" SET "user_id" = $1, "updated_at" = $2 WHERE "devices"."id" = $3[0m  [["user_id", 1], ["updated_at", "2023-08-07 20:17:33.387065"], ["id", 1]]
  ↳ app/lib/event_processors/identify.rb:24:in `update_devices_owner_if_necessary!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/identify.rb:24:in `update_devices_owner_if_necessary!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-2a1313f0-e586-d757-08a4-be88a8658b5d"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.2ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 1], ["unique_identifier", "pv-7dfa2d63-0f02-706c-96b3-179ff141e266"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.2ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 1], ["page_hit_id", 1], ["name", "pdf downloaded"], ["timestamp", "2023-08-07 20:17:23"], ["created_at", "2023-08-07 20:17:33.401329"], ["updated_at", "2023-08-07 20:17:33.401329"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 2], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-07 20:17:33.402763"], ["updated_at", "2023-08-07 20:17:33.402763"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 2], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-07 20:17:33.404275"], ["updated_at", "2023-08-07 20:17:33.404275"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mInstance Load (0.2ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-2a1313f0-e586-d757-08a4-be88a8658b5d"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.2ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 1], ["unique_identifier", "pv-7dfa2d63-0f02-706c-96b3-179ff141e266"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "something"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.2ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 1], ["page_hit_id", 1], ["name", "sub event?"], ["timestamp", "2023-08-07 20:17:23"], ["created_at", "2023-08-07 20:17:33.414481"], ["updated_at", "2023-08-07 20:17:33.414481"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 3], ["key", "something"], ["value", "else"], ["created_at", "2023-08-07 20:17:33.415895"], ["updated_at", "2023-08-07 20:17:33.415895"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mInstance Load (0.1ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."instance_id" = $1 AND "users"."unique_identifier" = $2 LIMIT $3[0m  [["instance_id", 1], ["unique_identifier", "user-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:13:in `find_or_create_user!'
  [1m[36mDevice Load (0.2ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/lib/event_processors/identify.rb:22:in `update_devices_owner_if_necessary!'
  [1m[36mCACHE Instance Load (0.0ms)[0m  [1m[34mSELECT "instances".* FROM "instances" WHERE "instances"."public_key" = $1 LIMIT $2[0m  [["public_key", "abc-123"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:13:in `instance'
  [1m[36mCACHE Device Load (0.0ms)[0m  [1m[34mSELECT "devices".* FROM "devices" WHERE "devices"."instance_id" = $1 AND "devices"."fingerprint" = $2 LIMIT $3[0m  [["instance_id", 1], ["fingerprint", "2630776421"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:26:in `find_or_create_device'
  [1m[36mSession Load (0.2ms)[0m  [1m[34mSELECT "sessions".* FROM "sessions" WHERE "sessions"."device_id" = $1 AND "sessions"."unique_identifier" = $2 LIMIT $3[0m  [["device_id", 1], ["unique_identifier", "s-2a1313f0-e586-d757-08a4-be88a8658b5d"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/base.rb:19:in `find_or_create_session'
  [1m[36mPageHit Load (0.4ms)[0m  [1m[34mSELECT "page_hits".* FROM "page_hits" WHERE "page_hits"."session_id" = $1 AND "page_hits"."unique_identifier" = $2 LIMIT $3[0m  [["session_id", 1], ["unique_identifier", "pv-7dfa2d63-0f02-706c-96b3-179ff141e266"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:17:in `find_or_create_page_hit'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "filename"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "metadata" WHERE "metadata"."key" = $1 AND "metadata"."parent_type" = $2 AND "metadata"."parent_id" IS NULL LIMIT $3[0m  [["key", "size"], ["parent_type", "Event"], ["LIMIT", 1]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mEvent Create (0.3ms)[0m  [1m[32mINSERT INTO "events" ("device_id", "session_id", "page_hit_id", "name", "timestamp", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["device_id", 1], ["session_id", 1], ["page_hit_id", 1], ["name", "pdf downloaded"], ["timestamp", "2023-08-07 20:17:23"], ["created_at", "2023-08-07 20:17:33.441668"], ["updated_at", "2023-08-07 20:17:33.441668"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 4], ["key", "filename"], ["value", "example.pdf"], ["created_at", "2023-08-07 20:17:33.443161"], ["updated_at", "2023-08-07 20:17:33.443161"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "metadata" ("parent_type", "parent_id", "key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_type", "Event"], ["parent_id", 4], ["key", "size"], ["value", "1234"], ["created_at", "2023-08-07 20:17:33.444617"], ["updated_at", "2023-08-07 20:17:33.444617"]]
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
  [1m[36mTRANSACTION (14.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/lib/event_processors/custom.rb:5:in `process!'
