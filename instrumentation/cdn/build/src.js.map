{"version":3,"file":"src.js","mappings":"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","sources":["webpack://cdn/../src/uuidGenerator.js","webpack://cdn/../src/reportingHandler.js","webpack://cdn/../src/pageViewTracker.js","webpack://cdn/../src/performanceEntriesHandler.js","webpack://cdn/../node_modules/web-vitals/dist/web-vitals.js","webpack://cdn/../src/performanceMetricsHandler.js","webpack://cdn/../src/swishjam.js","webpack://cdn/./index.js"],"sourcesContent":["export class UuidGenerator {\n  static generate(prefix) {\n    return `${prefix}-${Date.now()}-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`.replace(/x/g, function(c) {\n      var r = (Math.random() * 16) | 0,\n        v = c == \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    });\n  }\n}","import { UuidGenerator } from './uuidGenerator';\nconst EVENT_TYPES = ['PAGE_VIEW', 'PAGE_LEFT', 'PAGE_LOAD_METRIC', 'PERFORMANCE_ENTRY'];\n\nexport class ReportingHandler {\n  constructor(options = {}) {\n    this.reportingUrl = options.reportingUrl || (() => { throw new Error('`ReportingHandler` missing required option: `reportingUrl`.') })();\n    this.publicApiKey = options.publicApiKey || (() => { throw new Error('`ReportingHandler` missing required option: `publicApiKey`.') })();\n    this.maxNumEventsInMemory = options.maxNumEventsInMemory || 25;\n    this.reportAfterIdleTimeMs = options.reportAfterIdleTimeMs || 10_000;\n    this.reportingIdleTimeCheckInterval = options.reportingIdleTimeCheckInterval || 5_000;\n    this.mockApiCalls = options.mockApiCalls || false;\n    this.dataToReport = [];\n    this._setReportingOnIdleTimeInterval();\n  }\n\n  setCurrentPageViewIdentifier(pageViewIdentifier) {\n    this.currentPageViewIdentifier = pageViewIdentifier;\n  }\n\n  recordEvent(eventName, data, uniqueId = null) {\n    if (!EVENT_TYPES.includes(eventName)) throw new Error(`Invalid event: ${eventName}. Valid event types are: ${EVENT_TYPES.join(', ')}.`);\n    if (!this.currentPageViewIdentifier) throw new Error('ReportingHandler has no currentPageViewIdentifier, cannot record event.');\n    this.dataToReport.push({ \n      _event: eventName, \n      // uniqueIdentifier: uniqueId,\n      uniqueIdentifier: uniqueId || UuidGenerator.generate(eventName.toLowerCase()),\n      siteId: this.publicApiKey,\n      pageViewIdentifier: this.currentPageViewIdentifier, \n      ts: Date.now(), \n      data \n    });\n    this.lastEventRecordedAtTs = Date.now();\n    if (this.dataToReport.length >= this.maxNumEventsInMemory) {\n      this._reportDataIfNecessary();\n    }\n  }\n\n  reportData = this._reportDataIfNecessary;\n\n  _hasDataToReport() {\n    return this.dataToReport.length > 0;\n  }\n\n  _setReportingOnIdleTimeInterval() {\n    setInterval(() => {\n      if (this.lastEventRecordedAtTs && Date.now() - this.lastEventRecordedAtTs >= this.reportAfterIdleTimeMs) {\n        this._reportDataIfNecessary()\n      }\n    }, this.reportingIdleTimeCheckInterval);\n  }\n\n  _reportDataIfNecessary() {\n    if (!this._hasDataToReport()) return;\n    const body = { siteId: this.publicApiKey, data: this.dataToReport };\n    if (this.mockApiCalls) {\n      console.log('Reporting data to mock API', body);\n    } else if (navigator.sendBeacon) {\n      const blob = new Blob([JSON.stringify(body)], {});\n      navigator.sendBeacon(this.reportingUrl, blob);\n    } else {\n      const xhr = new XMLHttpRequest();\n      xhr.open('POST', this.reportingUrl);\n      xhr.setRequestHeader('Content-Type', 'application/json');\n      xhr.send(JSON.stringify(body));\n    }\n    this.dataToReport = [];\n  }\n}","import { UuidGenerator } from \"./uuidGenerator\";\n\nexport class PageViewTracker {\n  constructor(reportingHandler) {\n    this.reportingHandler = reportingHandler;\n    window.addEventListener('beforeunload', () => this._reportPageLeftAtTsIfNecessary());\n  }\n\n  trackPageView({ navigationType, previousPageUrl }) {\n    this._reportPageLeftAtTsIfNecessary();\n    this.currentPageViewIdentifier = UuidGenerator.generate('page_view');\n    this.reportingHandler.setCurrentPageViewIdentifier(this.currentPageViewIdentifier);\n    this.reportingHandler.recordEvent('PAGE_VIEW', {\n      pageLoadTs: Date.now(),\n      navigationType: navigationType,\n      url: encodeURIComponent(window.location.href || ''),\n      referrerUrl: encodeURIComponent(previousPageUrl || ''),\n      userAgent: window.navigator.userAgent,\n      screenWidth: window.innerWidth,\n      screenHeight: window.innerHeight,\n      connection: {\n        effectiveType: window.navigator.connection.effectiveType,\n        downlink: window.navigator.connection.downlink,\n        rtt: window.navigator.connection.rtt,\n      }\n    }, this.currentPageViewIdentifier);\n    return window.location.href;\n  }\n\n  _reportPageLeftAtTsIfNecessary() {\n    if (!this.currentPageViewIdentifier) return;\n    this.reportingHandler.recordEvent('PAGE_LEFT', { \n      pageLoadId: this.currentPageViewIdentifier,\n      leftPageAtTs: Date.now(),\n    });\n    this.reportingHandler.reportData();\n  }\n}","export class PerformanceEntriesHandler {\n  constructor(reportingHandler, options = {}) {\n    this.reportingHandler = reportingHandler;\n    this.performanceEntryTypesToCapture = options.performanceEntryTypesToCapture || [\"paint\", \"longtask\", \"navigation\", \"resource\", \"largest-contentful-paint\", \"first-input\", \"layout-shift\"];\n    this.ignoredPerformanceEntryUrls = [\n      ...(options.ignoredPerformanceEntryUrls || []),\n      ...(options.includeSwishjamResourcesEntries ? [] : [options.reportingUrl])\n    ];\n  }\n\n  beginCapturingPerformanceEntries() {\n    this._getPerformanceEntries().forEach(entry => {\n      if (!this.ignoredPerformanceEntryUrls.includes(entry.name)) {\n        this.reportingHandler.recordEvent('PERFORMANCE_ENTRY', this._formattedPerformanceEntry(entry));\n      }\n    });\n    this._onPerformanceEntries(newPerformanceEntries => {\n      newPerformanceEntries.forEach(entry => {\n        if (!this.ignoredPerformanceEntryUrls.includes(entry.name)) {\n          this.reportingHandler.recordEvent('PERFORMANCE_ENTRY', this._formattedPerformanceEntry(entry));\n        }\n      });\n    });\n  }\n\n  _onPerformanceEntries(callback) {\n    if(!window.PerformanceObserver) return;\n    return new PerformanceObserver((list, _observer) => callback(list.getEntries())).observe({ entryTypes: this.performanceEntryTypesToCapture });\n  }\n\n  _getPerformanceEntries() {\n    if(!window.performance || !window.performance.getEntries) return [];\n    return window.performance.getEntries().filter(entry => this.performanceEntryTypesToCapture.includes(entry.entryType));\n  }\n\n  _formattedPerformanceEntry(entry) {\n    return { ...entry.toJSON(), name: encodeURIComponent(entry.name || \"\") };\n  }\n}","var e,n,t,r,i,a=-1,o=function(e){addEventListener(\"pageshow\",(function(n){n.persisted&&(a=n.timeStamp,e(n))}),!0)},c=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType(\"navigation\")[0]},u=function(){var e=c();return e&&e.activationStart||0},f=function(e,n){var t=c(),r=\"navigate\";return a>=0?r=\"back-forward-cache\":t&&(r=document.prerendering||u()>0?\"prerender\":document.wasDiscarded?\"restore\":t.type.replace(/_/g,\"-\")),{name:e,value:void 0===n?-1:n,rating:\"good\",delta:0,entries:[],id:\"v3-\".concat(Date.now(),\"-\").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},s=function(e,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){n(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},t||{})),r}}catch(e){}},d=function(e,n,t,r){var i,a;return function(o){n.value>=0&&(o||r)&&((a=n.value-(i||0))||void 0===i)&&(i=n.value,n.delta=a,n.rating=function(e,n){return e>n[1]?\"poor\":e>n[0]?\"needs-improvement\":\"good\"}(n.value,t),e(n))}},l=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},v=function(e){var n=function(n){\"pagehide\"!==n.type&&\"hidden\"!==document.visibilityState||e(n)};addEventListener(\"visibilitychange\",n,!0),addEventListener(\"pagehide\",n,!0)},p=function(e){var n=!1;return function(t){n||(e(t),n=!0)}},m=-1,h=function(){return\"hidden\"!==document.visibilityState||document.prerendering?1/0:0},g=function(e){\"hidden\"===document.visibilityState&&m>-1&&(m=\"visibilitychange\"===e.type?e.timeStamp:0,T())},y=function(){addEventListener(\"visibilitychange\",g,!0),addEventListener(\"prerenderingchange\",g,!0)},T=function(){removeEventListener(\"visibilitychange\",g,!0),removeEventListener(\"prerenderingchange\",g,!0)},E=function(){return m<0&&(m=h(),y(),o((function(){setTimeout((function(){m=h(),y()}),0)}))),{get firstHiddenTime(){return m}}},C=function(e){document.prerendering?addEventListener(\"prerenderingchange\",(function(){return e()}),!0):e()},L=function(e,n){n=n||{},C((function(){var t,r=[1800,3e3],i=E(),a=f(\"FCP\"),c=s(\"paint\",(function(e){e.forEach((function(e){\"first-contentful-paint\"===e.name&&(c.disconnect(),e.startTime<i.firstHiddenTime&&(a.value=Math.max(e.startTime-u(),0),a.entries.push(e),t(!0)))}))}));c&&(t=d(e,a,r,n.reportAllChanges),o((function(i){a=f(\"FCP\"),t=d(e,a,r,n.reportAllChanges),l((function(){a.value=performance.now()-i.timeStamp,t(!0)}))})))}))},b=function(e,n){n=n||{},L(p((function(){var t,r=[.1,.25],i=f(\"CLS\",0),a=0,c=[],u=function(e){e.forEach((function(e){if(!e.hadRecentInput){var n=c[0],t=c[c.length-1];a&&e.startTime-t.startTime<1e3&&e.startTime-n.startTime<5e3?(a+=e.value,c.push(e)):(a=e.value,c=[e])}})),a>i.value&&(i.value=a,i.entries=c,t())},p=s(\"layout-shift\",u);p&&(t=d(e,i,r,n.reportAllChanges),v((function(){u(p.takeRecords()),t(!0)})),o((function(){a=0,i=f(\"CLS\",0),t=d(e,i,r,n.reportAllChanges),l((function(){return t()}))})),setTimeout(t,0))})))},w={passive:!0,capture:!0},S=new Date,A=function(r,i){e||(e=i,n=r,t=new Date,F(removeEventListener),I())},I=function(){if(n>=0&&n<t-S){var i={entryType:\"first-input\",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+n};r.forEach((function(e){e(i)})),r=[]}},P=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;\"pointerdown\"==e.type?function(e,n){var t=function(){A(e,n),i()},r=function(){i()},i=function(){removeEventListener(\"pointerup\",t,w),removeEventListener(\"pointercancel\",r,w)};addEventListener(\"pointerup\",t,w),addEventListener(\"pointercancel\",r,w)}(n,e):A(n,e)}},F=function(e){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].forEach((function(n){return e(n,P,w)}))},M=function(t,i){i=i||{},C((function(){var a,c=[100,300],u=E(),l=f(\"FID\"),m=function(e){e.startTime<u.firstHiddenTime&&(l.value=e.processingStart-e.startTime,l.entries.push(e),a(!0))},h=function(e){e.forEach(m)},g=s(\"first-input\",h);a=d(t,l,c,i.reportAllChanges),g&&v(p((function(){h(g.takeRecords()),g.disconnect()}))),g&&o((function(){var o;l=f(\"FID\"),a=d(t,l,c,i.reportAllChanges),r=[],n=-1,e=null,F(addEventListener),o=m,r.push(o),I()}))}))},k=0,D=1/0,x=0,B=function(e){e.forEach((function(e){e.interactionId&&(D=Math.min(D,e.interactionId),x=Math.max(x,e.interactionId),k=x?(x-D)/7+1:0)}))},R=function(){return i?k:performance.interactionCount||0},H=function(){\"interactionCount\"in performance||i||(i=s(\"event\",B,{type:\"event\",buffered:!0,durationThreshold:0}))},N=0,O=function(){return R()-N},q=[],j={},_=function(e){var n=q[q.length-1],t=j[e.interactionId];if(t||q.length<10||e.duration>n.latency){if(t)t.entries.push(e),t.latency=Math.max(t.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};j[r.id]=r,q.push(r)}q.sort((function(e,n){return n.latency-e.latency})),q.splice(10).forEach((function(e){delete j[e.id]}))}},z=function(e,n){n=n||{},C((function(){var t=[200,500];H();var r,i=f(\"INP\"),a=function(e){e.forEach((function(e){(e.interactionId&&_(e),\"first-input\"===e.entryType)&&(!q.some((function(n){return n.entries.some((function(n){return e.duration===n.duration&&e.startTime===n.startTime}))}))&&_(e))}));var n,t=(n=Math.min(q.length-1,Math.floor(O()/50)),q[n]);t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,r())},c=s(\"event\",a,{durationThreshold:n.durationThreshold||40});r=d(e,i,t,n.reportAllChanges),c&&(c.observe({type:\"first-input\",buffered:!0}),v((function(){a(c.takeRecords()),i.value<0&&O()>0&&(i.value=0,i.entries=[]),r(!0)})),o((function(){q=[],N=R(),i=f(\"INP\"),r=d(e,i,t,n.reportAllChanges)})))}))},G={},J=function(e,n){n=n||{},C((function(){var t,r=[2500,4e3],i=E(),a=f(\"LCP\"),c=function(e){var n=e[e.length-1];if(n){var r=Math.max(n.startTime-u(),0);r<i.firstHiddenTime&&(a.value=r,a.entries=[n],t())}},m=s(\"largest-contentful-paint\",c);if(m){t=d(e,a,r,n.reportAllChanges);var h=p((function(){G[a.id]||(c(m.takeRecords()),m.disconnect(),G[a.id]=!0,t(!0))}));[\"keydown\",\"click\"].forEach((function(e){addEventListener(e,h,!0)})),v(h),o((function(i){a=f(\"LCP\"),t=d(e,a,r,n.reportAllChanges),l((function(){a.value=performance.now()-i.timeStamp,G[a.id]=!0,t(!0)}))}))}}))},K=function e(n){document.prerendering?C((function(){return e(n)})):\"complete\"!==document.readyState?addEventListener(\"load\",(function(){return e(n)}),!0):setTimeout(n,0)},Q=function(e,n){n=n||{};var t=[800,1800],r=f(\"TTFB\"),i=d(e,r,t,n.reportAllChanges);K((function(){var a=c();if(a){var s=a.responseStart;if(s<=0||s>performance.now())return;r.value=Math.max(s-u(),0),r.entries=[a],i(!0),o((function(){r=f(\"TTFB\",0),(i=d(e,r,t,n.reportAllChanges))(!0)}))}}))};export{b as getCLS,L as getFCP,M as getFID,z as getINP,J as getLCP,Q as getTTFB,b as onCLS,L as onFCP,M as onFID,z as onINP,J as onLCP,Q as onTTFB};\n","// import { onLCP, onFID, onCLS, onFCP, onTTFB, onINP } from 'web-vitals/attribution';\nimport { onLCP, onFID, onCLS, onFCP, onTTFB, onINP } from 'web-vitals';\n\nexport class PerformanceMetricsHandler {\n  constructor(reportingHandler) {\n    this.reportingHandler = reportingHandler;\n  }\n\n  beginCapturingPerformanceMetrics() {\n    onLCP(entry => this._reportCWV('LCP', entry));\n    onFCP(entry => this._reportCWV('FCP', entry));\n    onCLS(entry => this._reportCWV('CLS', entry));\n    onFID(entry => this._reportCWV('FID', entry));\n    onTTFB(entry => this._reportCWV('TTFB', entry));\n    onINP(entry => this._reportCWV('INP', entry));\n  }\n\n  _reportCWV(type, entry) {\n    this.reportingHandler.recordEvent('PAGE_LOAD_METRIC', { type: type, ...entry });\n  }\n}","import { ReportingHandler } from './reportingHandler';\nimport { PageViewTracker } from './pageViewTracker';\nimport { PerformanceEntriesHandler } from './performanceEntriesHandler';\nimport { PerformanceMetricsHandler } from './performanceMetricsHandler'; \n\nexport class Swishjam {\n  static init(options = {}) {\n    options = Swishjam._setConfig(options);\n    window.Swishjam = { config: options };\n    if (Math.random() > options.sampleRate) {\n      console.warn('Swishjam sample rate not met, not instrumenting page');\n    } else {\n      const reportingHandler = new ReportingHandler({\n        reportingUrl: options.reportingUrl,\n        publicApiKey: options.publicApiKey,\n        maxNumEventsInMemory: options.maxNumEventsInMemory,\n        reportAfterIdleTimeMs: options.reportAfterIdleTimeMs,\n        reportingIdleTimeCheckInterval: options.reportingIdleTimeCheckInterval,\n        mockApiCalls: options.mockApiCalls,\n      });\n      const pageViewTracker = new PageViewTracker(reportingHandler);\n      let currentUrl = pageViewTracker.trackPageView({ navigationType: 'hard', previousPageUrl: document.referrer });\n\n      if (!options.disablePerformanceEntriesCapture) {\n        new PerformanceEntriesHandler(reportingHandler, {\n          performanceEntryTypesToCapture: options.performanceEntryTypesToCapture, \n          includeSwishjamResourcesEntries: options.includeSwishjamResourcesEntries,\n          reportingUrl: options.reportingUrl,\n        }).beginCapturingPerformanceEntries();\n      }\n      new PerformanceMetricsHandler(reportingHandler).beginCapturingPerformanceMetrics();\n\n      window.addEventListener('hashchange', () => {\n        currentUrl = pageViewTracker.trackPageView({ navigationType: 'soft', previousPageUrl: currentUrl })\n      });\n      window.addEventListener('popstate', () => {\n        currentUrl = pageViewTracker.trackPageView({ navigationType: 'soft', previousPageUrl: currentUrl })\n      });\n      if (window.history.pushState) {\n        const originalPushState = window.history.pushState\n        window.history.pushState = function () {\n          originalPushState.apply(this, arguments);\n          currentUrl = pageViewTracker.trackPageView({ navigationType: 'soft', previousPageUrl: currentUrl });\n        }\n      }\n    }\n  }\n\n  static _setConfig(config) {\n    if (!config.reportingUrl) throw new Error('Swishjam `reportingUrl` is required');\n    if (!config.publicApiKey) throw new Error('Swishjam `publicApiKey` is required');\n    return {\n      reportingUrl: config.reportingUrl,\n      publicApiKey: config.publicApiKey,\n      sampleRate: config.sampleRate || 1.0,\n      maxNumEventsInMemory: config.maxNumEventsInMemory || 25,\n      reportAfterIdleTimeMs: config.reportAfterIdleTimeMs || 10_000,\n      reportingIdleTimeCheckInterval: config.reportingIdleTimeCheckInterval || 2_000,\n      mockApiCalls: config.mockApiCalls || false,\n      performanceEntryTypesToCapture: config.performanceEntryTypesToCapture || ['navigation', 'paint', 'resource', 'longtask', 'largest-contentful-paint', 'layout-shift'],\n      includeSwishjamResourcesEntries: config.includeSwishjamResourcesEntries || false,\n      disablePerformanceEntriesCapture: config.disablePerformanceEntriesCapture || false,\n    }\n  }\n}","import { Swishjam } from '../src/swishjam';\n\n(function() {\n  const reportingUrl = document.currentScript.getAttribute('swishjam-reporting-url');\n  const publicApiKey = document.currentScript.getAttribute('swishjam-public-api-key');\n  if (!reportingUrl) throw new Error('Swishjam Error: You must specify your Swishjam reporting URL in the `swishjam-reporting-url` attribute of the script tag.');\n  if (!publicApiKey) throw new Error('Swishjam Error: You must specify your Swishjam public API key in the `swishjam-public-api-key` attribute of the script tag.');\n  if (document.readyState === 'complete') {\n    Swishjam.init({ reportingUrl, publicApiKey });\n  } else {\n    window.addEventListener('load', () => {\n      Swishjam.init({ reportingUrl, publicApiKey });\n    });\n  }\n})();"],"names":["UuidGenerator","prefix","Date","now","replace","c","r","Math","random","toString","EVENT_TYPES","ReportingHandler","options","this","_reportDataIfNecessary","reportingUrl","Error","publicApiKey","maxNumEventsInMemory","reportAfterIdleTimeMs","reportingIdleTimeCheckInterval","mockApiCalls","dataToReport","_setReportingOnIdleTimeInterval","pageViewIdentifier","currentPageViewIdentifier","eventName","data","uniqueId","includes","join","push","_event","uniqueIdentifier","generate","toLowerCase","siteId","ts","lastEventRecordedAtTs","length","setInterval","_hasDataToReport","body","console","log","navigator","sendBeacon","blob","Blob","JSON","stringify","xhr","XMLHttpRequest","open","setRequestHeader","send","PageViewTracker","reportingHandler","window","addEventListener","_reportPageLeftAtTsIfNecessary","navigationType","previousPageUrl","setCurrentPageViewIdentifier","recordEvent","pageLoadTs","url","encodeURIComponent","location","href","referrerUrl","userAgent","screenWidth","innerWidth","screenHeight","innerHeight","connection","effectiveType","downlink","rtt","pageLoadId","leftPageAtTs","reportData","e","n","t","i","PerformanceEntriesHandler","performanceEntryTypesToCapture","ignoredPerformanceEntryUrls","includeSwishjamResourcesEntries","_getPerformanceEntries","forEach","entry","name","_formattedPerformanceEntry","_onPerformanceEntries","newPerformanceEntries","callback","PerformanceObserver","list","_observer","getEntries","observe","entryTypes","performance","filter","entryType","toJSON","a","o","persisted","timeStamp","getEntriesByType","u","activationStart","f","document","prerendering","wasDiscarded","type","value","rating","delta","entries","id","concat","floor","s","supportedEntryTypes","Promise","resolve","then","Object","assign","buffered","d","l","requestAnimationFrame","v","visibilityState","p","m","h","g","T","y","removeEventListener","E","setTimeout","firstHiddenTime","C","L","disconnect","startTime","max","reportAllChanges","w","passive","capture","S","A","F","I","target","cancelable","processingStart","P","k","D","x","B","interactionId","min","R","interactionCount","H","durationThreshold","N","O","q","j","_","duration","latency","sort","splice","G","K","readyState","Q","responseStart","PerformanceMetricsHandler","takeRecords","onLCP","_reportCWV","onFCP","hadRecentInput","onCLS","onFID","onTTFB","some","onINP","Swishjam","_setConfig","config","sampleRate","warn","pageViewTracker","currentUrl","trackPageView","referrer","disablePerformanceEntriesCapture","beginCapturingPerformanceEntries","beginCapturingPerformanceMetrics","history","pushState","originalPushState","apply","arguments","currentScript","getAttribute","init"],"sourceRoot":""}